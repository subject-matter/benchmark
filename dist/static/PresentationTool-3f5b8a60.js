import{r as p,aB as rr,al as Zo,j as m,b2 as Hn,s as ye,ae as J,b3 as Jo,b4 as Vi,b5 as Qo,a5 as Ce,aQ as tt,a9 as q,aK as xe,b6 as ea,B as be,b7 as ta,b8 as na,b9 as Ei,ba as ia,bb as ki,bc as sa,bd as Rt,a8 as Ie,be as Ri,bf as ra,bg as oa,aL as Di,aI as Dt,aa as Mt,F as or,bh as aa,x as ar,bi as cr,bj as ca,bk as la,bl as rn,R as ua,bm as da,bn as fa,bo as ha,bp as pa,a6 as ma,aP as ga,bq as lr,H as ur,br as ya,bs as va,bt as dr,bu as xa,aO as ba,bv as wa,J as Pa,ay as Tn,bw as Sn,bx as Cn,aR as Ta,by as Sa,bz as Ca,bA as Aa,T as fr,V as hr,a as ja,g as pr,a0 as Va,bB as Ea,h as ka,D as Ra}from"./sanity-64968bd9.js";import{_ as Da,c as Ma}from"./DisplayedDocumentBroadcaster-3be794b6.js";const La=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qn=/_key\s*==\s*['"](.*)['"]/,Ia=/^\d*:\d*$/;function Xn(e){return typeof e=="number"||typeof e=="string"&&/^\[\d+\]$/.test(e)}function Kt(e){return typeof e=="string"?qn.test(e.trim()):typeof e=="object"&&"_key"in e}function mr(e){if(typeof e=="string"&&Ia.test(e))return!0;if(!Array.isArray(e)||e.length!==2)return!1;const[t,n]=e;return(typeof t=="number"||t==="")&&(typeof n=="number"||n==="")}function Oa(e,t,n){const i=typeof t=="string"?gr(t):t;if(!Array.isArray(i))throw new Error("Path must be an array or a string");let s=e;for(let r=0;r<i.length;r++){const o=i[r];if(Xn(o)){if(!Array.isArray(s))return n;s=s[o]}if(Kt(o)){if(!Array.isArray(s))return n;s=s.find(a=>a._key===o._key)}if(typeof o=="string"&&(s=typeof s=="object"&&s!==null?s[o]:void 0),typeof s>"u")return n}return s}function Fa(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((t,n,i)=>{const s=typeof n;if(s==="number")return`${t}[${n}]`;if(s==="string")return`${t}${i===0?"":"."}${n}`;if(Kt(n)&&n._key)return`${t}[_key=="${n._key}"]`;if(Array.isArray(n)){const[r,o]=n;return`${t}[${r}:${o}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}function gr(e){if(typeof e!="string")throw new Error("Path is not a string");const t=e.match(La);if(!t)throw new Error("Invalid path string");return t.map(Ba)}function Ba(e){return Xn(e)?$a(e):Kt(e)?Ua(e):mr(e)?_a(e):e}function $a(e){return Number(e.replace(/[^\d]/g,""))}function Ua(e){return{_key:e.match(qn)[1]}}function _a(e){const[t,n]=e.split(":").map(i=>i===""?i:Number(i));return[t,n]}var yr=Object.freeze({__proto__:null,fromString:gr,get:Oa,isIndexSegment:Xn,isIndexTuple:mr,isKeySegment:Kt,reKeySegment:qn,toString:Fa});const Mi="drafts.";function Bh(e){return e.startsWith(Mi)?e.slice(Mi.length):e}const Li={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},Ii={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function za(e){return`$${e.map(t=>typeof t=="string"?`['${t.replace(/[\f\n\r\t'\\]/g,n=>Li[n])}']`:typeof t=="number"?`[${t}]`:t._key!==""?`[?(@._key=='${t._key.replace(/['\\]/g,n=>Li[n])}')]`:`[${t._index}]`).join("")}`}function $h(e){const t=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let i;for(;(i=n.exec(e))!==null;){if(i[1]!==void 0){const s=i[1].replace(/\\(\\|f|n|r|t|')/g,r=>Ii[r]);t.push(s);continue}if(i[2]!==void 0){t.push(parseInt(i[2],10));continue}if(i[3]!==void 0){const s=i[3].replace(/\\(\\')/g,r=>Ii[r]);t.push({_key:s,_index:-1});continue}}return t}function Na(e){return e.map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(t._index!==-1)return t._index;throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function Uh(e,t){if(!(t!=null&&t.mappings))return;const n=za(Na(e));if(t.mappings[n]!==void 0)return{mapping:t.mappings[n],matchedPath:n,pathSuffix:""};const i=Object.entries(t.mappings).filter(([a])=>n.startsWith(a)).sort(([a],[c])=>c.length-a.length);if(i.length==0)return;const[s,r]=i[0],o=n.substring(s.length);return{mapping:r,matchedPath:s,pathSuffix:o}}function Wa(e){return e!==null&&Array.isArray(e)}function Oi(e){return typeof e=="object"&&e!==null}function on(e,t,n=[]){return Wa(e)?e.map((i,s)=>{if(Oi(i)){const r=i._key;if(typeof r=="string")return on(i,t,n.concat({_key:r,_index:s}))}return on(i,t,n.concat(s))}):Oi(e)?Object.fromEntries(Object.entries(e).map(([i,s])=>[i,on(s,t,n.concat(i))])):t(e,n)}const vr="sanity.previewUrlSecret",Ka="sanity-preview-url-secret",Ga="2023-11-09",Gt="sanity-preview-secret",Yn="sanity-preview-pathname",Ha=3600,qa=`*[_type == "${vr}" && dateTime(_updatedAt) <= dateTime(now()) - 3600]`,Xa="sanity.preview-url-secret";function Ya(e){const t=new URL(e);return t.searchParams.delete(Yn),t.searchParams.delete(Gt),t}function Za(e){return e.searchParams.has(Gt)}function Ja(e,t,n){const i=new URL(e);return i.searchParams.set(Gt,t),i.searchParams.set(Yn,n),i}const Lt=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ht=p.createContext({}),qt=p.createContext(null),Xt=typeof document<"u",Zn=Xt?p.useLayoutEffect:p.useEffect,xr=p.createContext({strict:!1}),Jn=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Qa="framerAppearId",br="data-"+Jn(Qa),wr={skipAnimations:!1,useManualTiming:!1};class Fi{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ec(e){let t=new Fi,n=new Fi,i=0,s=!1,r=!1;const o=new WeakSet,a={schedule:(c,l=!1,d=!1)=>{const u=d&&s,f=u?t:n;return l&&o.add(c),f.add(c)&&u&&s&&(i=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){r=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let l=0;l<i;l++){const d=t.order[l];o.has(d)&&(a.schedule(d),e()),d(c)}s=!1,r&&(r=!1,a.process(c))}};return a}const bt=["prepare","read","update","preRender","render","postRender"],tc=40;function Pr(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=bt.reduce((u,f)=>(u[f]=ec(()=>n=!0),u),{}),o=u=>{r[u].process(s)},a=()=>{const u=performance.now();n=!1,s.delta=i?1e3/60:Math.max(Math.min(u-s.timestamp,tc),1),s.timestamp=u,s.isProcessing=!0,bt.forEach(o),s.isProcessing=!1,n&&t&&(i=!1,e(a))},c=()=>{n=!0,i=!0,s.isProcessing||e(a)};return{schedule:bt.reduce((u,f)=>{const h=r[f];return u[f]=(g,y=!1,x=!1)=>(n||c(),h.schedule(g,y,x)),u},{}),cancel:u=>bt.forEach(f=>r[f].cancel(u)),state:s,steps:r}}const{schedule:Qn,cancel:_h}=Pr(queueMicrotask,!1);function nc(e,t,n,i){const{visualElement:s}=p.useContext(Ht),r=p.useContext(xr),o=p.useContext(qt),a=p.useContext(Lt).reducedMotion,c=p.useRef();i=i||r.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const l=c.current;p.useInsertionEffect(()=>{l&&l.update(n,o)});const d=p.useRef(!!(n[br]&&!window.HandoffComplete));return Zn(()=>{l&&(Qn.postRender(l.render),d.current&&l.animationState&&l.animationState.animateChanges())}),p.useEffect(()=>{l&&(l.updateFeatures(),!d.current&&l.animationState&&l.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),l}function He(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ic(e,t,n){return p.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):He(n)&&(n.current=i))},[t])}function lt(e){return typeof e=="string"||Array.isArray(e)}function Yt(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const ei=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ti=["initial",...ei];function Zt(e){return Yt(e.animate)||ti.some(t=>lt(e[t]))}function Tr(e){return!!(Zt(e)||e.variants)}function sc(e,t){if(Zt(e)){const{initial:n,animate:i}=e;return{initial:n===!1||lt(n)?n:void 0,animate:lt(i)?i:void 0}}return e.inherit!==!1?t:{}}function rc(e){const{initial:t,animate:n}=sc(e,p.useContext(Ht));return p.useMemo(()=>({initial:t,animate:n}),[Bi(t),Bi(n)])}function Bi(e){return Array.isArray(e)?e.join(" "):e}const $i={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ut={};for(const e in $i)ut[e]={isEnabled:t=>$i[e].some(n=>!!t[n])};function oc(e){for(const t in e)ut[t]={...ut[t],...e[t]}}const ni=p.createContext({}),Sr=p.createContext({}),ac=Symbol.for("motionComponentSymbol");function cc({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:s}){e&&oc(e);function r(a,c){let l;const d={...p.useContext(Lt),...a,layoutId:lc(a)},{isStatic:u}=d,f=rc(a),h=i(a,u);if(!u&&Xt){f.visualElement=nc(s,h,d,t);const g=p.useContext(Sr),y=p.useContext(xr).strict;f.visualElement&&(l=f.visualElement.loadFeatures(d,y,e,g))}return p.createElement(Ht.Provider,{value:f},l&&f.visualElement?p.createElement(l,{visualElement:f.visualElement,...d}):null,n(s,a,ic(h,f.visualElement,c),h,u,f.visualElement))}const o=p.forwardRef(r);return o[ac]=s,o}function lc({layoutId:e}){const t=p.useContext(ni).id;return t&&e!==void 0?t+"-"+e:e}function uc(e){function t(i,s={}){return cc(e(i,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const dc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ii(e){return typeof e!="string"||e.includes("-")?!1:!!(dc.indexOf(e)>-1||/[A-Z]/.test(e))}const It={};function fc(e){Object.assign(It,e)}const ft=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ge=new Set(ft);function Cr(e,{layout:t,layoutId:n}){return Ge.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!It[e]||e==="opacity")}const ae=e=>!!(e&&e.getVelocity),hc={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pc=ft.length;function mc(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,s){let r="";for(let o=0;o<pc;o++){const a=ft[o];if(e[a]!==void 0){const c=hc[a]||a;r+=`${c}(${e[a]}) `}}return t&&!e.z&&(r+="translateZ(0)"),r=r.trim(),s?r=s(e,i?"":r):n&&i&&(r="none"),r}const Ar=e=>t=>typeof t=="string"&&t.startsWith(e),jr=Ar("--"),gc=Ar("var(--"),Ot=e=>gc(e)?yc.test(e.split("/*")[0].trim()):!1,yc=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)$/i,vc=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Fe=(e,t,n)=>n>t?t:n<e?e:n,Qe={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},rt={...Qe,transform:e=>Fe(0,1,e)},wt={...Qe,default:1},ot=e=>Math.round(e*1e5)/1e5,si=/(-)?([\d]*\.?[\d])+/g,xc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,bc=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ht(e){return typeof e=="string"}const pt=e=>({test:t=>ht(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Me=pt("deg"),we=pt("%"),j=pt("px"),wc=pt("vh"),Pc=pt("vw"),Ui={...we,parse:e=>we.parse(e)/100,transform:e=>we.transform(e*100)},_i={...Qe,transform:Math.round},Vr={borderWidth:j,borderTopWidth:j,borderRightWidth:j,borderBottomWidth:j,borderLeftWidth:j,borderRadius:j,radius:j,borderTopLeftRadius:j,borderTopRightRadius:j,borderBottomRightRadius:j,borderBottomLeftRadius:j,width:j,maxWidth:j,height:j,maxHeight:j,size:j,top:j,right:j,bottom:j,left:j,padding:j,paddingTop:j,paddingRight:j,paddingBottom:j,paddingLeft:j,margin:j,marginTop:j,marginRight:j,marginBottom:j,marginLeft:j,rotate:Me,rotateX:Me,rotateY:Me,rotateZ:Me,scale:wt,scaleX:wt,scaleY:wt,scaleZ:wt,skew:Me,skewX:Me,skewY:Me,distance:j,translateX:j,translateY:j,translateZ:j,x:j,y:j,z:j,perspective:j,transformPerspective:j,opacity:rt,originX:Ui,originY:Ui,originZ:j,zIndex:_i,fillOpacity:rt,strokeOpacity:rt,numOctaves:_i};function ri(e,t,n,i){const{style:s,vars:r,transform:o,transformOrigin:a}=e;let c=!1,l=!1,d=!0;for(const u in t){const f=t[u];if(jr(u)){r[u]=f;continue}const h=Vr[u],g=vc(f,h);if(Ge.has(u)){if(c=!0,o[u]=g,!d)continue;f!==(h.default||0)&&(d=!1)}else u.startsWith("origin")?(l=!0,a[u]=g):s[u]=g}if(t.transform||(c||i?s.transform=mc(e.transform,n,d,i):s.transform&&(s.transform="none")),l){const{originX:u="50%",originY:f="50%",originZ:h=0}=a;s.transformOrigin=`${u} ${f} ${h}`}}const oi=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Er(e,t,n){for(const i in t)!ae(t[i])&&!Cr(i,n)&&(e[i]=t[i])}function Tc({transformTemplate:e},t,n){return p.useMemo(()=>{const i=oi();return ri(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function Sc(e,t,n){const i=e.style||{},s={};return Er(s,i,e),Object.assign(s,Tc(e,t,n)),s}function Cc(e,t,n){const i={},s=Sc(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=s,i}const Ac=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ft(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ac.has(e)}let kr=e=>!Ft(e);function Rr(e){e&&(kr=t=>t.startsWith("on")?!Ft(t):e(t))}try{Rr(require("@emotion/is-prop-valid").default)}catch{}function jc(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(kr(s)||n===!0&&Ft(s)||!t&&!Ft(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}function zi(e,t,n){return typeof e=="string"?e:j.transform(t+n*e)}function Vc(e,t,n){const i=zi(t,e.x,e.width),s=zi(n,e.y,e.height);return`${i} ${s}`}const Ec={offset:"stroke-dashoffset",array:"stroke-dasharray"},kc={offset:"strokeDashoffset",array:"strokeDasharray"};function Rc(e,t,n=1,i=0,s=!0){e.pathLength=1;const r=s?Ec:kc;e[r.offset]=j.transform(-i);const o=j.transform(t),a=j.transform(n);e[r.array]=`${o} ${a}`}function ai(e,{attrX:t,attrY:n,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...l},d,u,f){if(ri(e,l,d,f),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g,dimensions:y}=e;h.transform&&(y&&(g.transform=h.transform),delete h.transform),y&&(s!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=Vc(y,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),i!==void 0&&(h.scale=i),o!==void 0&&Rc(h,o,a,c,!1)}const Dr=()=>({...oi(),attrs:{}}),ci=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Dc(e,t,n,i){const s=p.useMemo(()=>{const r=Dr();return ai(r,t,{enableHardwareAcceleration:!1},ci(i),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};Er(r,e.style,e),s.style={...r,...s.style}}return s}function Mc(e=!1){return(n,i,s,{latestValues:r},o)=>{const c=(ii(n)?Dc:Cc)(i,r,o,n),l=jc(i,typeof n=="string",e),d=n!==p.Fragment?{...l,...c,ref:s}:{},{children:u}=i,f=p.useMemo(()=>ae(u)?u.get():u,[u]);return p.createElement(n,{...d,children:f})}}function Mr(e,{style:t,vars:n},i,s){Object.assign(e.style,t,s&&s.getProjectionStyles(i));for(const r in n)e.style.setProperty(r,n[r])}const Lr=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ir(e,t,n,i){Mr(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(Lr.has(s)?s:Jn(s),t.attrs[s])}function li(e,t){const{style:n}=e,i={};for(const s in n)(ae(n[s])||t.style&&ae(t.style[s])||Cr(s,e))&&(i[s]=n[s]);return i}function Or(e,t){const n=li(e,t);for(const i in e)if(ae(e[i])||ae(t[i])){const s=ft.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=e[i]}return n}function ui(e,t,n,i={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,s)),t}function di(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bt=e=>Array.isArray(e),Lc=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Ic=e=>Bt(e)?e[e.length-1]||0:e;function At(e){const t=ae(e)?e.get():e;return Lc(t)?t.toValue():t}function Oc({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,s,r){const o={latestValues:Fc(i,s,r,e),renderState:t()};return n&&(o.mount=a=>n(i,a,o)),o}const Fr=e=>(t,n)=>{const i=p.useContext(Ht),s=p.useContext(qt),r=()=>Oc(e,t,i,s);return n?r():di(r)};function Fc(e,t,n,i){const s={},r=i(e,{});for(const f in r)s[f]=At(r[f]);let{initial:o,animate:a}=e;const c=Zt(e),l=Tr(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const u=d?a:o;return u&&typeof u!="boolean"&&!Yt(u)&&(Array.isArray(u)?u:[u]).forEach(h=>{const g=ui(e,h);if(!g)return;const{transitionEnd:y,transition:x,...w}=g;for(const v in w){let b=w[v];if(Array.isArray(b)){const P=d?b.length-1:0;b=b[P]}b!==null&&(s[v]=b)}for(const v in y)s[v]=y[v]}),s}const N=e=>e,{schedule:$,cancel:ke,state:Q,steps:an}=Pr(typeof requestAnimationFrame<"u"?requestAnimationFrame:N,!0),Bc={useVisualState:Fr({scrapeMotionValuesFromProps:Or,createRenderState:Dr,onMount:(e,t,{renderState:n,latestValues:i})=>{$.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),$.render(()=>{ai(n,i,{enableHardwareAcceleration:!1},ci(t.tagName),e.transformTemplate),Ir(t,n)})}})},$c={useVisualState:Fr({scrapeMotionValuesFromProps:li,createRenderState:oi})};function Uc(e,{forwardMotionProps:t=!1},n,i){return{...ii(e)?Bc:$c,preloadedFeatures:n,useRender:Mc(t),createVisualElement:i,Component:e}}function Ae(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const Br=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Jt(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const _c=e=>t=>Br(t)&&e(t,Jt(t));function je(e,t,n,i){return Ae(e,t,_c(n),i)}const zc=(e,t)=>n=>t(e(n)),Ve=(...e)=>e.reduce(zc);function $r(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Ni=$r("dragHorizontal"),Wi=$r("dragVertical");function Ur(e){let t=!1;if(e==="y")t=Wi();else if(e==="x")t=Ni();else{const n=Ni(),i=Wi();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function _r(){const e=Ur(!0);return e?(e(),!1):!0}class $e{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Ki(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),s=(r,o)=>{if(r.pointerType==="touch"||_r())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[i]&&$.update(()=>a[i](r,o))};return je(e.current,n,s,{passive:!e.getProps()[i]})}class Nc extends $e{mount(){this.unmount=Ve(Ki(this.node,!0),Ki(this.node,!1))}unmount(){}}class Wc extends $e{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ve(Ae(this.node.current,"focus",()=>this.onFocus()),Ae(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const zr=(e,t)=>t?e===t?!0:zr(e,t.parentElement):!1;function cn(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Jt(n))}class Kc extends $e{constructor(){super(...arguments),this.removeStartListeners=N,this.removeEndListeners=N,this.removeAccessibleListeners=N,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),r=je(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:d,globalTapTarget:u}=this.node.getProps();$.update(()=>{!u&&!zr(this.node.current,a.target)?d&&d(a,c):l&&l(a,c)})},{passive:!(i.onTap||i.onPointerUp)}),o=je(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Ve(r,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||cn("up",(c,l)=>{const{onTap:d}=this.node.getProps();d&&$.update(()=>d(c,l))})};this.removeEndListeners(),this.removeEndListeners=Ae(this.node.current,"keyup",o),cn("down",(a,c)=>{this.startPress(a,c)})},n=Ae(this.node.current,"keydown",t),i=()=>{this.isPressing&&cn("cancel",(r,o)=>this.cancelPress(r,o))},s=Ae(this.node.current,"blur",i);this.removeAccessibleListeners=Ve(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&$.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!_r()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&$.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=je(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Ae(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ve(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const An=new WeakMap,ln=new WeakMap,Gc=e=>{const t=An.get(e.target);t&&t(e)},Hc=e=>{e.forEach(Gc)};function qc({root:e,...t}){const n=e||document;ln.has(n)||ln.set(n,{});const i=ln.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(Hc,{root:e,...t})),i[s]}function Xc(e,t,n){const i=qc(t);return An.set(e,n),i.observe(e),()=>{An.delete(e),i.unobserve(e)}}const Yc={some:0,all:1};class Zc extends $e{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=t,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:Yc[s]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,r&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),f=l?d:u;f&&f(c)};return Xc(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Jc(t,n))&&this.startObserver()}unmount(){}}function Jc({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Qc={inView:{Feature:Zc},tap:{Feature:Kc},focus:{Feature:Wc},hover:{Feature:Nc}};function Nr(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function el(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function tl(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function Qt(e,t,n){const i=e.getProps();return ui(i,t,n!==void 0?n:i.custom,el(e),tl(e))}let nl=N,fi=N;const Oe=e=>e*1e3,Ee=e=>e/1e3,il={current:!1},Wr=e=>Array.isArray(e)&&typeof e[0]=="number";function Kr(e){return!!(!e||typeof e=="string"&&Gr[e]||Wr(e)||Array.isArray(e)&&e.every(Kr))}const st=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Gr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:st([0,.65,.55,1]),circOut:st([.55,0,1,.45]),backIn:st([.31,.01,.66,-.59]),backOut:st([.33,1.53,.69,.99])};function Hr(e){if(e)return Wr(e)?st(e):Array.isArray(e)?e.map(Hr):Gr[e]}function sl(e,t,n,{delay:i=0,duration:s,repeat:r=0,repeatType:o="loop",ease:a,times:c}={}){const l={[t]:n};c&&(l.offset=c);const d=Hr(a);return Array.isArray(d)&&(l.easing=d),e.animate(l,{delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function rl(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const qr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ol=1e-7,al=12;function cl(e,t,n,i,s){let r,o,a=0;do o=t+(n-t)/2,r=qr(o,i,s)-e,r>0?n=o:t=o;while(Math.abs(r)>ol&&++a<al);return o}function mt(e,t,n,i){if(e===t&&n===i)return N;const s=r=>cl(r,0,1,e,n);return r=>r===0||r===1?r:qr(s(r),t,i)}const ll=mt(.42,0,1,1),ul=mt(0,0,.58,1),Xr=mt(.42,0,.58,1),dl=e=>Array.isArray(e)&&typeof e[0]!="number",Yr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Zr=e=>t=>1-e(1-t),hi=e=>1-Math.sin(Math.acos(e)),Jr=Zr(hi),fl=Yr(hi),Qr=mt(.33,1.53,.69,.99),pi=Zr(Qr),hl=Yr(pi),pl=e=>(e*=2)<1?.5*pi(e):.5*(2-Math.pow(2,-10*(e-1))),ml={linear:N,easeIn:ll,easeInOut:Xr,easeOut:ul,circIn:hi,circInOut:fl,circOut:Jr,backIn:pi,backInOut:hl,backOut:Qr,anticipate:pl},Gi=e=>{if(Array.isArray(e)){fi(e.length===4);const[t,n,i,s]=e;return mt(t,n,i,s)}else if(typeof e=="string")return ml[e];return e},dt=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},U=(e,t,n)=>e+(t-e)*n;function un(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function gl({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,r=0,o=0;if(!t)s=r=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=un(c,a,e+1/3),r=un(c,a,e),o=un(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}const mi=(e,t)=>n=>!!(ht(n)&&bc.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),eo=(e,t,n)=>i=>{if(!ht(i))return i;const[s,r,o,a]=i.match(si);return{[e]:parseFloat(s),[t]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},yl=e=>Fe(0,255,e),dn={...Qe,transform:e=>Math.round(yl(e))},We={test:mi("rgb","red"),parse:eo("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+dn.transform(e)+", "+dn.transform(t)+", "+dn.transform(n)+", "+ot(rt.transform(i))+")"};function vl(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const jn={test:mi("#"),parse:vl,transform:We.transform},qe={test:mi("hsl","hue"),parse:eo("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+we.transform(ot(t))+", "+we.transform(ot(n))+", "+ot(rt.transform(i))+")"},fn=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},xl=[jn,We,qe],bl=e=>xl.find(t=>t.test(e));function Hi(e){const t=bl(e);let n=t.parse(e);return t===qe&&(n=gl(n)),n}const qi=(e,t)=>{const n=Hi(e),i=Hi(t),s={...n};return r=>(s.red=fn(n.red,i.red,r),s.green=fn(n.green,i.green,r),s.blue=fn(n.blue,i.blue,r),s.alpha=U(n.alpha,i.alpha,r),We.transform(s))},te={test:e=>We.test(e)||jn.test(e)||qe.test(e),parse:e=>We.test(e)?We.parse(e):qe.test(e)?qe.parse(e):jn.parse(e),transform:e=>ht(e)?e:e.hasOwnProperty("red")?We.transform(e):qe.transform(e)};function wl(e){var t,n;return isNaN(e)&&ht(e)&&(((t=e.match(si))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(xc))===null||n===void 0?void 0:n.length)||0)>0}const to="number",no="color",Pl="var",Tl="var(",Xi="${}",Yi=/(var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\))|(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))|((-)?([\d]*\.?[\d])+)/gi;function $t(e){const t=e.toString(),n=t.match(Yi)||[],i=[],s={color:[],number:[],var:[]},r=[];for(let c=0;c<n.length;c++){const l=n[c];te.test(l)?(s.color.push(c),r.push(no),i.push(te.parse(l))):l.startsWith(Tl)?(s.var.push(c),r.push(Pl),i.push(l)):(s.number.push(c),r.push(to),i.push(parseFloat(l)))}const a=t.replace(Yi,Xi).split(Xi);return{values:i,split:a,indexes:s,types:r}}function io(e){return $t(e).values}function so(e){const{split:t,types:n}=$t(e),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const a=n[o];a===to?r+=ot(s[o]):a===no?r+=te.transform(s[o]):r+=s[o]}return r}}const Sl=e=>typeof e=="number"?0:e;function Cl(e){const t=io(e);return so(e)(t.map(Sl))}const Be={test:wl,parse:io,createTransformer:so,getAnimatableNone:Cl};function Vn(e,t){return n=>n>0?t:e}function Al(e,t){return n=>U(e,t,n)}function gi(e){return typeof e=="number"?Al:typeof e=="string"?Ot(e)?Vn:te.test(e)?qi:El:Array.isArray(e)?ro:typeof e=="object"?te.test(e)?qi:jl:Vn}function ro(e,t){const n=[...e],i=n.length,s=e.map((r,o)=>gi(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)n[o]=s[o](r);return n}}function jl(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=gi(e[s])(e[s],t[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function Vl(e,t){var n;const i=[],s={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],a=e.indexes[o][s[o]],c=(n=e.values[a])!==null&&n!==void 0?n:0;i[r]=c,s[o]++}return i}const El=(e,t)=>{const n=Be.createTransformer(t),i=$t(e),s=$t(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Ve(ro(Vl(i,s),s.values),n):Vn(e,t)};function oo(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?U(e,t,n):gi(e)(e,t)}function kl(e,t,n){const i=[],s=n||oo,r=e.length-1;for(let o=0;o<r;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||N:t;a=Ve(c,a)}i.push(a)}return i}function Rl(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const r=e.length;if(fi(r===t.length),r===1)return()=>t[0];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=kl(t,i,s),a=o.length,c=l=>{let d=0;if(a>1)for(;d<e.length-2&&!(l<e[d+1]);d++);const u=dt(e[d],e[d+1],l);return o[d](u)};return n?l=>c(Fe(e[0],e[r-1],l)):c}function Dl(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=dt(0,t,i);e.push(U(n,1,s))}}function Ml(e){const t=[0];return Dl(t,e.length-1),t}function Ll(e,t){return e.map(n=>n*t)}function Il(e,t){return e.map(()=>t||Xr).splice(0,e.length-1)}function Ut({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=dl(i)?i.map(Gi):Gi(i),r={done:!1,value:t[0]},o=Ll(n&&n.length===t.length?n:Ml(t),e),a=Rl(o,t,{ease:Array.isArray(s)?s:Il(t,s)});return{calculatedDuration:e,next:c=>(r.value=a(c),r.done=c>=e,r)}}function ao(e,t){return t?e*(1e3/t):0}const Ol=5;function co(e,t,n){const i=Math.max(t-Ol,0);return ao(n-e(i),t-i)}const hn=.001,Fl=.01,Zi=10,Bl=.05,$l=1;function Ul({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let s,r;nl(e<=Oe(Zi));let o=1-t;o=Fe(Bl,$l,o),e=Fe(Fl,Zi,Ee(e)),o<1?(s=l=>{const d=l*o,u=d*e,f=d-n,h=En(l,o),g=Math.exp(-u);return hn-f/h*g},r=l=>{const u=l*o*e,f=u*n+n,h=Math.pow(o,2)*Math.pow(l,2)*e,g=Math.exp(-u),y=En(Math.pow(l,2),o);return(-s(l)+hn>0?-1:1)*((f-h)*g)/y}):(s=l=>{const d=Math.exp(-l*e),u=(l-n)*e+1;return-hn+d*u},r=l=>{const d=Math.exp(-l*e),u=(n-l)*(e*e);return d*u});const a=5/e,c=zl(s,r,a);if(e=Oe(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const l=Math.pow(c,2)*i;return{stiffness:l,damping:o*2*Math.sqrt(i*l),duration:e}}}const _l=12;function zl(e,t,n){let i=n;for(let s=1;s<_l;s++)i=i-e(i)/t(i);return i}function En(e,t){return e*Math.sqrt(1-t*t)}const Nl=["duration","bounce"],Wl=["stiffness","damping","mass"];function Ji(e,t){return t.some(n=>e[n]!==void 0)}function Kl(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ji(e,Wl)&&Ji(e,Nl)){const n=Ul(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function lo({keyframes:e,restDelta:t,restSpeed:n,...i}){const s=e[0],r=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:l,duration:d,velocity:u,isResolvedFromDuration:f}=Kl({...i,velocity:-Ee(i.velocity||0)}),h=u||0,g=c/(2*Math.sqrt(a*l)),y=r-s,x=Ee(Math.sqrt(a/l)),w=Math.abs(y)<5;n||(n=w?.01:2),t||(t=w?.005:.5);let v;if(g<1){const b=En(x,g);v=P=>{const T=Math.exp(-g*x*P);return r-T*((h+g*x*y)/b*Math.sin(b*P)+y*Math.cos(b*P))}}else if(g===1)v=b=>r-Math.exp(-x*b)*(y+(h+x*y)*b);else{const b=x*Math.sqrt(g*g-1);v=P=>{const T=Math.exp(-g*x*P),S=Math.min(b*P,300);return r-T*((h+g*x*y)*Math.sinh(S)+b*y*Math.cosh(S))/b}}return{calculatedDuration:f&&d||null,next:b=>{const P=v(b);if(f)o.done=b>=d;else{let T=h;b!==0&&(g<1?T=co(v,b,P):T=0);const S=Math.abs(T)<=n,V=Math.abs(r-P)<=t;o.done=S&&V}return o.value=o.done?r:P,o}}}function Qi({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:d}){const u=e[0],f={done:!1,value:u},h=C=>a!==void 0&&C<a||c!==void 0&&C>c,g=C=>a===void 0?c:c===void 0||Math.abs(a-C)<Math.abs(c-C)?a:c;let y=n*t;const x=u+y,w=o===void 0?x:o(x);w!==x&&(y=w-u);const v=C=>-y*Math.exp(-C/i),b=C=>w+v(C),P=C=>{const A=v(C),D=b(C);f.done=Math.abs(A)<=l,f.value=f.done?w:D};let T,S;const V=C=>{h(f.value)&&(T=C,S=lo({keyframes:[f.value,g(f.value)],velocity:co(b,C,f.value),damping:s,stiffness:r,restDelta:l,restSpeed:d}))};return V(0),{calculatedDuration:null,next:C=>{let A=!1;return!S&&T===void 0&&(A=!0,P(C),V(C)),T!==void 0&&C>T?S.next(C-T):(!A&&P(C),f)}}}let jt;function Gl(){jt=void 0}const Ke={now:()=>(jt===void 0&&Ke.set(Q.isProcessing||wr.useManualTiming?Q.timestamp:performance.now()),jt),set:e=>{jt=e,queueMicrotask(Gl)}},Hl=e=>{const t=({timestamp:n})=>e(n);return{start:()=>$.update(t,!0),stop:()=>ke(t),now:()=>Q.isProcessing?Q.timestamp:Ke.now()}},es=2e4;function ts(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<es;)t+=n,i=e.next(t);return t>=es?1/0:t}const ql={decay:Qi,inertia:Qi,tween:Ut,keyframes:Ut,spring:lo},Xl=e=>e/100;function _t({autoplay:e=!0,delay:t=0,driver:n=Hl,keyframes:i,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:l,onComplete:d,onUpdate:u,...f}){let h=1,g=!1,y,x;const w=()=>{x=new Promise(k=>{y=k})};w();let v;const b=ql[s]||Ut;let P;b!==Ut&&typeof i[0]!="number"&&(P=Ve(Xl,oo(i[0],i[1])),i=[0,100]);const T=b({...f,keyframes:i});let S;a==="mirror"&&(S=b({...f,keyframes:[...i].reverse(),velocity:-(f.velocity||0)}));let V="idle",C=null,A=null,D=null;T.calculatedDuration===null&&r&&(T.calculatedDuration=ts(T));const{calculatedDuration:I}=T;let K=1/0,W=1/0;I!==null&&(K=I+o,W=K*(r+1)-o);let _=0;const B=k=>{if(A===null)return;h>0&&(A=Math.min(A,k)),h<0&&(A=Math.min(k-W/h,A)),C!==null?_=C:_=Math.round(k-A)*h;const ie=_-t*(h>=0?1:-1),re=h>=0?ie<0:ie>W;_=Math.max(ie,0),V==="finished"&&C===null&&(_=W);let ce=_,ve=T;if(r){const oe=Math.min(_,W)/K;let X=Math.floor(oe),G=oe%1;!G&&oe>=1&&(G=1),G===1&&X--,X=Math.min(X,r+1),!!(X%2)&&(a==="reverse"?(G=1-G,o&&(G-=o/K)):a==="mirror"&&(ve=S)),ce=Fe(0,1,G)*K}const le=re?{done:!1,value:i[0]}:ve.next(ce);P&&(le.value=P(le.value));let{done:Te}=le;!re&&I!==null&&(Te=h>=0?_>=W:_<=0);const he=C===null&&(V==="finished"||V==="running"&&Te);return u&&u(le.value),he&&se(),le},O=()=>{v&&v.stop(),v=void 0},F=()=>{V="idle",O(),y(),w(),A=D=null},se=()=>{V="finished",d&&d(),O(),y()},ne=()=>{if(g)return;v||(v=n(B));const k=v.now();c&&c(),C!==null?A=k-C:(!A||V==="finished")&&(A=k),V==="finished"&&w(),D=A,C=null,V="running",v.start()};e&&ne();const Pe={then(k,ie){return x.then(k,ie)},get time(){return Ee(_)},set time(k){k=Oe(k),_=k,C!==null||!v||h===0?C=k:A=v.now()-k/h},get duration(){const k=T.calculatedDuration===null?ts(T):T.calculatedDuration;return Ee(k)},get speed(){return h},set speed(k){k===h||!v||(h=k,Pe.time=Ee(_))},get state(){return V},play:ne,pause:()=>{V="paused",C=_},stop:()=>{g=!0,V!=="idle"&&(V="idle",l&&l(),F())},cancel:()=>{D!==null&&B(D),F()},complete:()=>{V="finished"},sample:k=>(A=0,B(k))};return Pe}function Yl(e){let t;return()=>(t===void 0&&(t=e()),t)}const Zl=Yl(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jl=new Set(["opacity","clipPath","filter","transform"]),Pt=10,Ql=2e4,eu=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Kr(t.ease);function tu(e,t,{onUpdate:n,onComplete:i,...s}){if(!(Zl()&&Jl.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,l=!1;const d=()=>{c=new Promise(b=>{a=b})};d();let{keyframes:u,duration:f=300,ease:h,times:g}=s;if(eu(t,s)){const b=_t({...s,repeat:0,delay:0});let P={done:!1,value:u[0]};const T=[];let S=0;for(;!P.done&&S<Ql;)P=b.sample(S),T.push(P.value),S+=Pt;g=void 0,u=T,f=S-Pt,h="linear"}const y=sl(e.owner.current,t,u,{...s,duration:f,ease:h,times:g}),x=()=>{l=!1,y.cancel()},w=()=>{l=!0,$.update(x),a(),d()};return y.onfinish=()=>{l||(e.set(rl(u,s)),i&&i(),w())},{then(b,P){return c.then(b,P)},attachTimeline(b){return y.timeline=b,y.onfinish=null,N},get time(){return Ee(y.currentTime||0)},set time(b){y.currentTime=Oe(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return Ee(f)},play:()=>{o||(y.play(),ke(x))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const P=_t({...s,autoplay:!1});e.setWithVelocity(P.sample(b-Pt).value,P.sample(b).value,Pt)}w()},complete:()=>{l||y.finish()},cancel:w}}function nu({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const s=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:N,pause:N,stop:N,then:r=>(r(),Promise.resolve()),cancel:N,complete:N});return t?_t({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const iu={type:"spring",stiffness:500,damping:25,restSpeed:10},su=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ru={type:"keyframes",duration:.8},ou={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},au=(e,{keyframes:t})=>t.length>2?ru:Ge.has(e)?e.startsWith("scale")?su(t[1]):iu:ou,kn=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Be.test(t)||t==="0")&&!t.startsWith("url(")),cu=new Set(["brightness","contrast","saturate","opacity"]);function lu(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(si)||[];if(!i)return e;const s=n.replace(i,"");let r=cu.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+s+")"}const uu=/([a-z-]*)\(.*?\)/g,Rn={...Be,getAnimatableNone:e=>{const t=e.match(uu);return t?t.map(lu).join(" "):e}},du={...Vr,color:te,backgroundColor:te,outlineColor:te,fill:te,stroke:te,borderColor:te,borderTopColor:te,borderRightColor:te,borderBottomColor:te,borderLeftColor:te,filter:Rn,WebkitFilter:Rn},yi=e=>du[e];function uo(e,t){let n=yi(e);return n!==Rn&&(n=Be),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const fo=e=>/^0[^.\s]+$/.test(e);function fu(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||fo(e)}function hu(e,t,n,i){const s=kn(t,n);let r;Array.isArray(n)?r=[...n]:r=[null,n];const o=i.from!==void 0?i.from:e.get();let a;const c=[];for(let l=0;l<r.length;l++)r[l]===null&&(r[l]=l===0?o:r[l-1]),fu(r[l])&&c.push(l),typeof r[l]=="string"&&r[l]!=="none"&&r[l]!=="0"&&(a=r[l]);if(s&&c.length&&a)for(let l=0;l<c.length;l++){const d=c[l];r[d]=uo(t,a)}return r}function pu({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:c,elapsed:l,...d}){return!!Object.keys(d).length}function vi(e,t){return e[t]||e.default||e}const xi=(e,t,n,i={})=>s=>{const r=vi(i,e)||{},o=r.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Oe(o);const c=hu(t,e,n,r),l=c[0],d=c[c.length-1],u=kn(e,l),f=kn(e,d);let h={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...r,delay:-a,onUpdate:g=>{t.set(g),r.onUpdate&&r.onUpdate(g)},onComplete:()=>{s(),r.onComplete&&r.onComplete()}};if(pu(r)||(h={...h,...au(e,h)}),h.duration&&(h.duration=Oe(h.duration)),h.repeatDelay&&(h.repeatDelay=Oe(h.repeatDelay)),!u||!f||il.current||r.type===!1||wr.skipAnimations)return nu(h);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=tu(t,e,h);if(g)return g}return _t(h)};function zt(e){return!!(ae(e)&&e.add)}const ho=e=>/^\-?\d*\.?\d+$/.test(e);function bi(e,t){e.indexOf(t)===-1&&e.push(t)}function wi(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Pi{constructor(){this.subscriptions=[]}add(t){return bi(this.subscriptions,t),()=>wi(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ns=30,mu=e=>!isNaN(parseFloat(e));class gu{constructor(t,n={}){this.version="11.0.8",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Ke.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.canTrackVelocity=mu(this.current),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ke.now()}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Pi);const i=this.events[t].add(n);return t==="change"?()=>{i(),$.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ke.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ns)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ns);return ao(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ze(e,t){return new gu(e,t)}const po=e=>t=>t.test(e),yu={test:e=>e==="auto",parse:e=>e},mo=[Qe,j,we,Me,Pc,wc,yu],nt=e=>mo.find(po(e)),vu=[...mo,te,Be],xu=e=>vu.find(po(e));function bu(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ze(n))}function wu(e,t){const n=Qt(e,t);let{transitionEnd:i={},transition:s={},...r}=n?e.makeTargetAnimatable(n,!1):{};r={...r,...i};for(const o in r){const a=Ic(r[o]);bu(e,o,a)}}function Pu(e,t,n){var i,s;const r=Object.keys(t).filter(a=>!e.hasValue(a)),o=r.length;if(o)for(let a=0;a<o;a++){const c=r[a],l=t[c];let d=null;Array.isArray(l)&&(d=l[0]),d===null&&(d=(s=(i=n[c])!==null&&i!==void 0?i:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(ho(d)||fo(d))?d=parseFloat(d):!xu(d)&&Be.test(l)&&(d=uo(c,l)),e.addValue(c,Ze(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function Tu(e,t){return t?(t[e]||t.default||t).from:void 0}function Su(e,t,n){const i={};for(const s in e){const r=Tu(s,t);if(r!==void 0)i[s]=r;else{const o=n.getValue(s);o&&(i[s]=o.get())}}return i}function Cu({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function Au(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function go(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");i&&(r=i);const l=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const f=e.getValue(u),h=a[u];if(!f||h===void 0||d&&Cu(d,u))continue;const g={delay:n,elapsed:0,...vi(r||{},u)};if(window.HandoffAppearAnimations){const w=e.getProps()[br];if(w){const v=window.HandoffAppearAnimations(w,u,f,$);v!==null&&(g.elapsed=v,g.isHandoff=!0)}}let y=!g.isHandoff&&!Au(f,h);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(xi(u,f,h,e.shouldReduceMotion&&Ge.has(u)?{type:!1}:g));const x=f.animation;zt(c)&&(c.add(u),x.then(()=>c.remove(u))),l.push(x)}return o&&Promise.all(l).then(()=>{o&&wu(e,o)}),l}function Dn(e,t,n={}){const i=Qt(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(go(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:l=0,staggerChildren:d,staggerDirection:u}=s;return ju(e,t,l+c,d,u,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,l]=a==="beforeChildren"?[r,o]:[o,r];return c().then(()=>l())}else return Promise.all([r(),o(n.delay)])}function ju(e,t,n=0,i=0,s=1,r){const o=[],a=(e.variantChildren.size-1)*i,c=s===1?(l=0)=>l*i:(l=0)=>a-l*i;return Array.from(e.variantChildren).sort(Vu).forEach((l,d)=>{l.notify("AnimationStart",t),o.push(Dn(l,t,{...r,delay:n+c(d)}).then(()=>l.notify("AnimationComplete",t)))}),Promise.all(o)}function Vu(e,t){return e.sortNodePosition(t)}function Eu(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>Dn(e,r,n));i=Promise.all(s)}else if(typeof t=="string")i=Dn(e,t,n);else{const s=typeof t=="function"?Qt(e,t,n.custom):t;i=Promise.all(go(e,s,n))}return i.then(()=>e.notify("AnimationComplete",t))}const ku=[...ei].reverse(),Ru=ei.length;function Du(e){return t=>Promise.all(t.map(({animation:n,options:i})=>Eu(e,n,i)))}function Mu(e){let t=Du(e);const n=Iu();let i=!0;const s=(c,l)=>{const d=Qt(e,l);if(d){const{transition:u,transitionEnd:f,...h}=d;c={...c,...h,...f}}return c};function r(c){t=c(e)}function o(c,l){const d=e.getProps(),u=e.getVariantContext(!0)||{},f=[],h=new Set;let g={},y=1/0;for(let w=0;w<Ru;w++){const v=ku[w],b=n[v],P=d[v]!==void 0?d[v]:u[v],T=lt(P),S=v===l?b.isActive:null;S===!1&&(y=w);let V=P===u[v]&&P!==d[v]&&T;if(V&&i&&e.manuallyAnimateOnMount&&(V=!1),b.protectedKeys={...g},!b.isActive&&S===null||!P&&!b.prevProp||Yt(P)||typeof P=="boolean")continue;let A=Lu(b.prevProp,P)||v===l&&b.isActive&&!V&&T||w>y&&T,D=!1;const I=Array.isArray(P)?P:[P];let K=I.reduce(s,{});S===!1&&(K={});const{prevResolvedValues:W={}}=b,_={...W,...K},B=O=>{A=!0,h.has(O)&&(D=!0,h.delete(O)),b.needsAnimating[O]=!0};for(const O in _){const F=K[O],se=W[O];if(g.hasOwnProperty(O))continue;let ne=!1;Bt(F)&&Bt(se)?ne=!Nr(F,se):ne=F!==se,ne?F!==void 0?B(O):h.add(O):F!==void 0&&h.has(O)?B(O):b.protectedKeys[O]=!0}b.prevProp=P,b.prevResolvedValues=K,b.isActive&&(g={...g,...K}),i&&e.blockInitialAnimation&&(A=!1),A&&(!V||D)&&f.push(...I.map(O=>({animation:O,options:{type:v,...c}})))}if(h.size){const w={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(w[v]=b)}),f.push({animation:w})}let x=!!f.length;return i&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(f):Promise.resolve()}function a(c,l,d){var u;if(n[c].isActive===l)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(h=>{var g;return(g=h.animationState)===null||g===void 0?void 0:g.setActive(c,l)}),n[c].isActive=l;const f=o(d,c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n}}function Lu(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Nr(t,e):!1}function Ue(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Iu(){return{animate:Ue(!0),whileInView:Ue(),whileHover:Ue(),whileTap:Ue(),whileDrag:Ue(),whileFocus:Ue(),exit:Ue()}}class Ou extends $e{constructor(t){super(t),t.animationState||(t.animationState=Mu(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yt(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Fu=0;class Bu extends $e{constructor(){super(...arguments),this.id=Fu++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&r.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const $u={animation:{Feature:Ou},exit:{Feature:Bu}},is=(e,t)=>Math.abs(e-t);function Uu(e,t){const n=is(e.x,t.x),i=is(e.y,t.y);return Math.sqrt(n**2+i**2)}class yo{constructor(t,n,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=mn(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=Uu(u.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:g}=u,{timestamp:y}=Q;this.history.push({...g,timestamp:y});const{onStart:x,onMove:w}=this.handlers;f||(x&&x(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=pn(f,this.transformPagePoint),$.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=mn(u.type==="pointercancel"?this.lastMoveEventInfo:pn(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(u,x),g&&g(u,x)},!Br(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.contextWindow=s||window;const o=Jt(t),a=pn(o,this.transformPagePoint),{point:c}=a,{timestamp:l}=Q;this.history=[{...c,timestamp:l}];const{onSessionStart:d}=n;d&&d(t,mn(a,this.history)),this.removeListeners=Ve(je(this.contextWindow,"pointermove",this.handlePointerMove),je(this.contextWindow,"pointerup",this.handlePointerUp),je(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ke(this.updatePoint)}}function pn(e,t){return t?{point:t(e.point)}:e}function ss(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mn({point:e},t){return{point:e,delta:ss(e,vo(t)),offset:ss(e,_u(t)),velocity:zu(t,.1)}}function _u(e){return e[0]}function vo(e){return e[e.length-1]}function zu(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=vo(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>Oe(t)));)n--;if(!i)return{x:0,y:0};const r=Ee(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function fe(e){return e.max-e.min}function Mn(e,t=0,n=.01){return Math.abs(e-t)<=n}function rs(e,t,n,i=.5){e.origin=i,e.originPoint=U(t.min,t.max,e.origin),e.scale=fe(n)/fe(t),(Mn(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=U(n.min,n.max,e.origin)-e.originPoint,(Mn(e.translate)||isNaN(e.translate))&&(e.translate=0)}function at(e,t,n,i){rs(e.x,t.x,n.x,i?i.originX:void 0),rs(e.y,t.y,n.y,i?i.originY:void 0)}function os(e,t,n){e.min=n.min+t.min,e.max=e.min+fe(t)}function Nu(e,t,n){os(e.x,t.x,n.x),os(e.y,t.y,n.y)}function as(e,t,n){e.min=t.min-n.min,e.max=e.min+fe(t)}function ct(e,t,n){as(e.x,t.x,n.x),as(e.y,t.y,n.y)}function Wu(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?U(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?U(n,e,i.max):Math.min(e,n)),e}function cs(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Ku(e,{top:t,left:n,bottom:i,right:s}){return{x:cs(e.x,n,s),y:cs(e.y,t,i)}}function ls(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function Gu(e,t){return{x:ls(e.x,t.x),y:ls(e.y,t.y)}}function Hu(e,t){let n=.5;const i=fe(e),s=fe(t);return s>i?n=dt(t.min,t.max-i,e.min):i>s&&(n=dt(e.min,e.max-s,t.min)),Fe(0,1,n)}function qu(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ln=.35;function Xu(e=Ln){return e===!1?e=0:e===!0&&(e=Ln),{x:us(e,"left","right"),y:us(e,"top","bottom")}}function us(e,t,n){return{min:ds(e,t),max:ds(e,n)}}function ds(e,t){return typeof e=="number"?e:e[t]||0}const fs=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xe=()=>({x:fs(),y:fs()}),hs=()=>({min:0,max:0}),z=()=>({x:hs(),y:hs()});function ge(e){return[e("x"),e("y")]}function xo({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function Yu({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Zu(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function gn(e){return e===void 0||e===1}function In({scale:e,scaleX:t,scaleY:n}){return!gn(e)||!gn(t)||!gn(n)}function _e(e){return In(e)||bo(e)||e.z||e.rotate||e.rotateX||e.rotateY}function bo(e){return ps(e.x)||ps(e.y)}function ps(e){return e&&e!=="0%"}function Nt(e,t,n){const i=e-n,s=t*i;return n+s}function ms(e,t,n,i,s){return s!==void 0&&(e=Nt(e,s,i)),Nt(e,n,i)+t}function On(e,t=0,n=1,i,s){e.min=ms(e.min,t,n,i,s),e.max=ms(e.max,t,n,i,s)}function wo(e,{x:t,y:n}){On(e.x,t.translate,t.scale,t.originPoint),On(e.y,n.translate,n.scale,n.originPoint)}function Ju(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=n[a],o=r.projectionDelta;const c=r.instance;c&&c.style&&c.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ye(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,wo(e,o)),i&&_e(r.latestValues)&&Ye(e,r.latestValues))}t.x=gs(t.x),t.y=gs(t.y)}function gs(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Le(e,t){e.min=e.min+t,e.max=e.max+t}function ys(e,t,[n,i,s]){const r=t[s]!==void 0?t[s]:.5,o=U(e.min,e.max,r);On(e,t[n],t[i],o,t.scale)}const Qu=["x","scaleX","originX"],ed=["y","scaleY","originY"];function Ye(e,t){ys(e.x,t,Qu),ys(e.y,t,ed)}function Po(e,t){return xo(Zu(e.getBoundingClientRect(),t))}function td(e,t,n){const i=Po(e,n),{scroll:s}=t;return s&&(Le(i.x,s.offset.x),Le(i.y,s.offset.y)),i}const To=({current:e})=>e?e.ownerDocument.defaultView:null,nd=new WeakMap;class id{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=z(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Jt(d,"page").point)},r=(d,u)=>{const{drag:f,dragPropagation:h,onDragStart:g}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ur(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ge(x=>{let w=this.getAxisMotionValue(x).get()||0;if(we.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[x];b&&(w=fe(b)*(parseFloat(w)/100))}}this.originPoint[x]=w}),g&&$.update(()=>g(d,u),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,u)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:x}=u;if(h&&this.currentDirection===null){this.currentDirection=sd(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",u.point,x),this.updateAxis("y",u.point,x),this.visualElement.render(),y&&y(d,u)},a=(d,u)=>this.stop(d,u),c=()=>ge(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new yo(t,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:To(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&$.update(()=>r(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!Tt(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=Wu(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;n&&He(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Ku(s.layoutBox,n):this.constraints=!1,this.elastic=Xu(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ge(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=qu(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!He(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=td(i,s.root,this.visualElement.getTransformPagePoint());let o=Gu(s.layout.layoutBox,r);if(n){const a=n(Yu(o));this.hasMutatedConstraints=!!a,a&&(o=xo(a))}return o}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=ge(d=>{if(!Tt(d,n,this.currentDirection))return;let u=c&&c[d]||{};o&&(u={min:0,max:0});const f=s?200:1e6,h=s?40:1e7,g={type:"inertia",velocity:i?t[d]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...r,...u};return this.startAxisValueAnimation(d,g)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(xi(t,i,0,n))}stopAnimation(){ge(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ge(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ge(n=>{const{drag:i}=this.getProps();if(!Tt(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];r.set(t[n]-U(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!He(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ge(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=Hu({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ge(o=>{if(!Tt(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(U(c,l,s[o]))})}addListeners(){if(!this.visualElement.current)return;nd.set(this.visualElement,this);const t=this.visualElement.current,n=je(t,"pointerdown",c=>{const{drag:l,dragListener:d=!0}=this.getProps();l&&d&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();He(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),i();const o=Ae(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(ge(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=c[d].translate,u.set(u.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=Ln,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function Tt(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function sd(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class rd extends $e{constructor(t){super(t),this.removeGroupControls=N,this.removeListeners=N,this.controls=new id(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||N}unmount(){this.removeGroupControls(),this.removeListeners()}}const vs=e=>(t,n)=>{e&&$.update(()=>e(t,n))};class od extends $e{constructor(){super(...arguments),this.removePointerDownListener=N}onPointerDown(t){this.session=new yo(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:To(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:vs(t),onStart:vs(n),onMove:i,onEnd:(r,o)=>{delete this.session,s&&$.update(()=>s(r,o))}}}mount(){this.removePointerDownListener=je(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function ad(){const e=p.useContext(qt);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=p.useId();return p.useEffect(()=>i(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const Vt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xs(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const it={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(j.test(e))e=parseFloat(e);else return e;const n=xs(e,t.target.x),i=xs(e,t.target.y);return`${n}% ${i}%`}},cd={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=Be.parse(e);if(s.length>5)return i;const r=Be.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const l=U(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=l),typeof s[3+o]=="number"&&(s[3+o]/=l),r(s)}};class ld extends rr.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;fc(ud),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Vt.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||$.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Qn.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function So(e){const[t,n]=ad(),i=p.useContext(ni);return rr.createElement(ld,{...e,layoutGroup:i,switchLayoutGroup:p.useContext(Sr),isPresent:t,safeToRemove:n})}const ud={borderRadius:{...it,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomLeftRadius:it,borderBottomRightRadius:it,boxShadow:cd},Co=["TopLeft","TopRight","BottomLeft","BottomRight"],dd=Co.length,bs=e=>typeof e=="string"?parseFloat(e):e,ws=e=>typeof e=="number"||j.test(e);function fd(e,t,n,i,s,r){s?(e.opacity=U(0,n.opacity!==void 0?n.opacity:1,hd(i)),e.opacityExit=U(t.opacity!==void 0?t.opacity:1,0,pd(i))):r&&(e.opacity=U(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<dd;o++){const a=`border${Co[o]}Radius`;let c=Ps(t,a),l=Ps(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||ws(c)===ws(l)?(e[a]=Math.max(U(bs(c),bs(l),i),0),(we.test(l)||we.test(c))&&(e[a]+="%")):e[a]=l}(t.rotate||n.rotate)&&(e.rotate=U(t.rotate||0,n.rotate||0,i))}function Ps(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const hd=Ao(0,.5,Jr),pd=Ao(.5,.95,N);function Ao(e,t,n){return i=>i<e?0:i>t?1:n(dt(e,t,i))}function Ts(e,t){e.min=t.min,e.max=t.max}function me(e,t){Ts(e.x,t.x),Ts(e.y,t.y)}function Ss(e,t,n,i,s){return e-=t,e=Nt(e,1/n,i),s!==void 0&&(e=Nt(e,1/s,i)),e}function md(e,t=0,n=1,i=.5,s,r=e,o=e){if(we.test(t)&&(t=parseFloat(t),t=U(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=U(r.min,r.max,i);e===r&&(a-=t),e.min=Ss(e.min,t,n,a,s),e.max=Ss(e.max,t,n,a,s)}function Cs(e,t,[n,i,s],r,o){md(e,t[n],t[i],t[s],t.scale,r,o)}const gd=["x","scaleX","originX"],yd=["y","scaleY","originY"];function As(e,t,n,i){Cs(e.x,t,gd,n?n.x:void 0,i?i.x:void 0),Cs(e.y,t,yd,n?n.y:void 0,i?i.y:void 0)}function js(e){return e.translate===0&&e.scale===1}function jo(e){return js(e.x)&&js(e.y)}function vd(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Vo(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Vs(e){return fe(e.x)/fe(e.y)}class xd{constructor(){this.members=[]}add(t){bi(this.members,t),t.scheduleRender()}remove(t){if(wi(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Es(e,t,n){let i="";const s=e.x.translate/t.x,r=e.y.translate/t.y;if((s||r)&&(i=`translate3d(${s}px, ${r}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:l,rotateY:d}=n;c&&(i+=`rotate(${c}deg) `),l&&(i+=`rotateX(${l}deg) `),d&&(i+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const bd=(e,t)=>e.depth-t.depth;class wd{constructor(){this.children=[],this.isDirty=!1}add(t){bi(this.children,t),this.isDirty=!0}remove(t){wi(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bd),this.isDirty=!1,this.children.forEach(t)}}function Pd(e,t){const n=Ke.now(),i=({timestamp:s})=>{const r=s-n;r>=t&&(ke(i),e(r-t))};return $.read(i,!0),()=>ke(i)}function Td(e){window.MotionDebug&&window.MotionDebug.record(e)}function Sd(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Cd(e,t,n){const i=ae(e)?e:Ze(e);return i.start(xi("",i,t,n)),i.animation}const ks=["","X","Y","Z"],Ad={visibility:"hidden"},Rs=1e3;let jd=0;const ze={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Eo({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=jd++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ze.totalNodes=ze.resolvedTargetDeltas=ze.recalculatedProjection=0,this.nodes.forEach(kd),this.nodes.forEach(Id),this.nodes.forEach(Od),this.nodes.forEach(Rd),Td(ze)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new wd)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Pi),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Sd(o),this.instance=o;const{layoutId:c,layout:l,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||c)&&(this.isLayoutDirty=!0),e){let u;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Pd(f,250),Vt.hasAnimatedSinceResize&&(Vt.hasAnimatedSinceResize=!1,this.nodes.forEach(Ms))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||_d,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=d.getProps(),v=!this.targetLayout||!Vo(this.targetLayout,g)||h,b=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,b);const P={...vi(y,"layout"),onPlay:x,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else f||Ms(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ke(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fd),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ds);return}this.isUpdating||this.nodes.forEach(Md),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(Ld),this.nodes.forEach(Vd),this.nodes.forEach(Ed),this.clearAllSnapshots();const a=Ke.now();Q.delta=Fe(0,1e3/60,a-Q.timestamp),Q.timestamp=a,Q.isProcessing=!0,an.update.process(Q),an.preRender.process(Q),an.render.process(Q),Q.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qn.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Dd),this.sharedNodes.forEach(Bd)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=z(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!jo(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;o&&(a||_e(this.latestValues)||d)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),zd(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return z();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Le(a.x,c.offset.x),Le(a.y,c.offset.y)),a}removeElementScroll(o){const a=z();me(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c],{scroll:d,options:u}=l;if(l!==this.root&&d&&u.layoutScroll){if(d.isRoot){me(a,o);const{scroll:f}=this.root;f&&(Le(a.x,-f.offset.x),Le(a.y,-f.offset.y))}Le(a.x,d.offset.x),Le(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const c=z();me(c,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ye(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),_e(d.latestValues)&&Ye(c,d.latestValues)}return _e(this.latestValues)&&Ye(c,this.latestValues),c}removeTransform(o){const a=z();me(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!_e(l.latestValues))continue;In(l.latestValues)&&l.updateSnapshot();const d=z(),u=l.measurePageBox();me(d,u),As(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return _e(this.latestValues)&&As(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Q.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==c;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Q.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=z(),this.relativeTargetOrigin=z(),ct(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),me(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=z(),this.targetWithTransforms=z()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nu(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):me(this.target,this.layout.layoutBox),wo(this.target,this.targetDelta)):me(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=z(),this.relativeTargetOrigin=z(),ct(this.relativeTargetOrigin,this.target,h.target),me(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ze.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||In(this.parent.latestValues)||bo(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Q.timestamp&&(l=!1),l)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;me(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;Ju(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=z());const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Xe(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Xe(),this.projectionDeltaWithTransform=Xe());const y=this.projectionTransform;at(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Es(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),ze.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},d={...this.latestValues},u=Xe();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=z(),h=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=h!==g,x=this.getStack(),w=!x||x.members.length<=1,v=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(Ud));this.animationProgress=0;let b;this.mixTargetDelta=P=>{const T=P/1e3;Ls(u.x,o.x,T),Ls(u.y,o.y,T),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ct(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$d(this.relativeTarget,this.relativeTargetOrigin,f,T),b&&vd(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=z()),me(b,this.relativeTarget)),y&&(this.animationValues=d,fd(d,l,this.latestValues,T,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ke(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$.update(()=>{Vt.hasAnimatedSinceResize=!0,this.currentAnimation=Cd(0,Rs,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rs),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:d}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&ko(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||z();const u=fe(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+u;const f=fe(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}me(a,c),Ye(a,d),at(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xd),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const l={};for(let d=0;d<ks.length;d++){const u="rotate"+ks[d];c[u]&&(l[u]=c[u],o.setStaticValue(u,0))}o.render();for(const d in l)o.setStaticValue(d,l[d]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ad;const l={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=At(o==null?void 0:o.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none",l;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=At(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!_e(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),l.transform=Es(this.projectionDeltaWithTransform,this.treeScale,f),d&&(l.transform=d(f,l.transform));const{x:h,y:g}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?l.opacity=u===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in It){if(f[y]===void 0)continue;const{correct:x,applyTo:w}=It[y],v=l.transform==="none"?f[y]:x(f[y],u);if(w){const b=w.length;for(let P=0;P<b;P++)l[w[P]]=v}else l[y]=v}return this.options.layoutId&&(l.pointerEvents=u===this?At(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Ds),this.root.sharedNodes.clear()}}}function Vd(e){e.updateLayout()}function Ed(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;r==="size"?ge(u=>{const f=o?n.measuredBox[u]:n.layoutBox[u],h=fe(f);f.min=i[u].min,f.max=f.min+h}):ko(r,n.layoutBox,i)&&ge(u=>{const f=o?n.measuredBox[u]:n.layoutBox[u],h=fe(i[u]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+h)});const a=Xe();at(a,i,n.layoutBox);const c=Xe();o?at(c,e.applyTransform(s,!0),n.measuredBox):at(c,i,n.layoutBox);const l=!jo(a);let d=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:h}=u;if(f&&h){const g=z();ct(g,n.layoutBox,f.layoutBox);const y=z();ct(y,i,h.layoutBox),Vo(g,y)||(d=!0),u.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function kd(e){ze.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Rd(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Dd(e){e.clearSnapshot()}function Ds(e){e.clearMeasurements()}function Md(e){e.isLayoutDirty=!1}function Ld(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ms(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Id(e){e.resolveTargetDelta()}function Od(e){e.calcProjection()}function Fd(e){e.resetRotation()}function Bd(e){e.removeLeadSnapshot()}function Ls(e,t,n){e.translate=U(t.translate,0,n),e.scale=U(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Is(e,t,n,i){e.min=U(t.min,n.min,i),e.max=U(t.max,n.max,i)}function $d(e,t,n,i){Is(e.x,t.x,n.x,i),Is(e.y,t.y,n.y,i)}function Ud(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _d={duration:.45,ease:[.4,0,.1,1]},Os=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Fs=Os("applewebkit/")&&!Os("chrome/")?Math.round:N;function Bs(e){e.min=Fs(e.min),e.max=Fs(e.max)}function zd(e){Bs(e.x),Bs(e.y)}function ko(e,t,n){return e==="position"||e==="preserve-aspect"&&!Mn(Vs(t),Vs(n),.2)}const Nd=Eo({attachResizeListener:(e,t)=>Ae(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yn={current:void 0},Ro=Eo({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yn.current){const e=new Nd({});e.mount(window),e.setOptions({layoutScroll:!0}),yn.current=e}return yn.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Wd={pan:{Feature:od},drag:{Feature:rd,ProjectionNode:Ro,MeasureLayout:So}},Kd=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Gd(e){const t=Kd.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function Fn(e,t,n=1){const[i,s]=Gd(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return ho(o)?parseFloat(o):o}else return Ot(s)?Fn(s,t,n+1):s}function Hd(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const r=s.get();if(!Ot(r))return;const o=Fn(r,i);o&&s.set(o)});for(const s in t){const r=t[s];if(!Ot(r))continue;const o=Fn(r,i);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=r))}return{target:t,transitionEnd:n}}const qd=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Do=e=>qd.has(e),Xd=e=>Object.keys(e).some(Do),$s=e=>e===Qe||e===j,Us=(e,t)=>parseFloat(e.split(", ")[t]),_s=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/);if(s)return Us(s[1],t);{const r=i.match(/^matrix\((.+)\)$/);return r?Us(r[1],e):0}},Yd=new Set(["x","y","z"]),Zd=ft.filter(e=>!Yd.has(e));function Jd(e){const t=[];return Zd.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Je={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:_s(4,13),y:_s(5,14)};Je.translateX=Je.x;Je.translateY=Je.y;const Qd=(e,t,n)=>{const i=t.measureViewportBox(),s=t.current,r=getComputedStyle(s),{display:o}=r,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(l=>{a[l]=Je[l](i,r)}),t.render();const c=t.measureViewportBox();return n.forEach(l=>{const d=t.getValue(l);d&&d.jump(a[l]),e[l]=Je[l](c,r)}),e},ef=(e,t,n={},i={})=>{t={...t},i={...i};const s=Object.keys(t).filter(Do);let r=[],o=!1;const a=[];if(s.forEach(c=>{const l=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],u=nt(d);const f=t[c];let h;if(Bt(f)){const g=f.length,y=f[0]===null?1:0;d=f[y],u=nt(d);for(let x=y;x<g&&f[x]!==null;x++)h?fi(nt(f[x])===h):h=nt(f[x])}else h=nt(f);if(u!==h)if($s(u)&&$s(h)){const g=l.get();typeof g=="string"&&l.set(parseFloat(g)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&h===j&&(t[c]=f.map(parseFloat))}else u!=null&&u.transform&&(h!=null&&h.transform)&&(d===0||f===0)?d===0?l.set(h.transform(d)):t[c]=u.transform(f):(o||(r=Jd(e),o=!0),a.push(c),i[c]=i[c]!==void 0?i[c]:t[c],l.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,l=Qd(t,e,a);return r.length&&r.forEach(([d,u])=>{e.getValue(d).set(u)}),e.render(),Xt&&c!==null&&window.scrollTo({top:c}),{target:l,transitionEnd:i}}else return{target:t,transitionEnd:i}};function tf(e,t,n,i){return Xd(t)?ef(e,t,n,i):{target:t,transitionEnd:i}}const nf=(e,t,n,i)=>{const s=Hd(e,t,i);return t=s.target,i=s.transitionEnd,tf(e,t,n,i)},Bn={current:null},Mo={current:!1};function sf(){if(Mo.current=!0,!!Xt)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bn.current=e.matches;e.addListener(t),t()}else Bn.current=!1}function rf(e,t,n){const{willChange:i}=t;for(const s in t){const r=t[s],o=n[s];if(ae(r))e.addValue(s,r),zt(i)&&i.add(s);else if(ae(o))e.addValue(s,Ze(r,{owner:e})),zt(i)&&i.remove(s);else if(o!==r)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(r)}else{const a=e.getStaticValue(s);e.addValue(s,Ze(a!==void 0?a:r,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const zs=new WeakMap,Lo=Object.keys(ut),of=Lo.length,Ns=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],af=ti.length;class cf{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$.render(this.render,!1,!0);const{latestValues:a,renderState:c}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Zt(n),this.isVariantNode=Tr(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:l,...d}=this.scrapeMotionValuesFromProps(n,{});for(const u in d){const f=d[u];a[u]!==void 0&&ae(f)&&(f.set(a[u],!1),zt(l)&&l.add(u))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,zs.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Mo.current||sf(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bn.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zs.delete(this.current),this.projection&&this.projection.unmount(),ke(this.notifyUpdate),ke(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=Ge.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&$.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),r()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,s,r){let o,a;for(let c=0;c<of;c++){const l=Lo[c],{isEnabled:d,Feature:u,ProjectionNode:f,MeasureLayout:h}=ut[l];f&&(o=f),d(n)&&(!this.features[l]&&u&&(this.features[l]=new u(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:l,drag:d,dragConstraints:u,layoutScroll:f,layoutRoot:h}=n;this.projection.setOptions({layoutId:c,layout:l,alwaysMeasureLayout:!!d||u&&He(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):z()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Ns.length;i++){const s=Ns[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r=t["on"+s];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=rf(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<af;i++){const s=ti[i],r=this.props[s];(lt(r)||r===!1)&&(n[s]=r)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Ze(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,s=typeof i=="string"||typeof i=="object"?(n=ui(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!ae(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Pi),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Io extends cf{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},s){const r=Su(i,t||{},this);if(s){Pu(this,i,r);const o=nf(this,i,r,n);n=o.transitionEnd,i=o.target}return{transition:t,transitionEnd:n,...i}}}function lf(e){return window.getComputedStyle(e)}class uf extends Io{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Ge.has(n)){const i=yi(n);return i&&i.default||0}else{const i=lf(t),s=(jr(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Po(t,n)}build(t,n,i,s){ri(t,n,i,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return li(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ae(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,s){Mr(t,n,i,s)}}class df extends Io{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ge.has(n)){const i=yi(n);return i&&i.default||0}return n=Lr.has(n)?n:Jn(n),t.getAttribute(n)}measureInstanceViewportBox(){return z()}scrapeMotionValuesFromProps(t,n){return Or(t,n)}build(t,n,i,s){ai(t,n,i,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,i,s){Ir(t,n,i,s)}mount(t){this.isSVGTag=ci(t.tagName),super.mount(t)}}const ff=(e,t)=>ii(e)?new df(t,{enableHardwareAcceleration:!1}):new uf(t,{enableHardwareAcceleration:!0}),hf={layout:{ProjectionNode:Ro,MeasureLayout:So}},pf={...$u,...Qc,...Wd,...hf},Oo=uc((e,t)=>Uc(e,t,pf,ff));function Fo(){const e=p.useRef(!1);return Zn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function mf(){const e=Fo(),[t,n]=p.useState(0),i=p.useCallback(()=>{e.current&&n(t+1)},[t]);return[p.useCallback(()=>$.postRender(i),[i]),t]}class gf extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yf({children:e,isPresent:t}){const n=p.useId(),i=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:r,height:o,top:a,left:c}=s.current;if(t||!i.current||!r||!o)return;i.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${r}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),p.createElement(gf,{isPresent:t,childRef:i,sizeRef:s},p.cloneElement(e,{ref:i}))}const vn=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o})=>{const a=di(vf),c=p.useId(),l=p.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const u of a.values())if(!u)return;i&&i()},register:d=>(a.set(d,!1),()=>a.delete(d))}),r?void 0:[n]);return p.useMemo(()=>{a.forEach((d,u)=>a.set(u,!1))},[n]),p.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),o==="popLayout"&&(e=p.createElement(yf,{isPresent:n},e)),p.createElement(qt.Provider,{value:l},e)};function vf(){return new Map}function xf(e){return p.useEffect(()=>()=>e(),[])}const Ne=e=>e.key||"";function bf(e,t){e.forEach(n=>{const i=Ne(n);t.set(i,n)})}function wf(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const Pf=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:r=!0,mode:o="sync"})=>{const a=p.useContext(ni).forceRender||mf()[0],c=Fo(),l=wf(e);let d=l;const u=p.useRef(new Map).current,f=p.useRef(d),h=p.useRef(new Map).current,g=p.useRef(!0);if(Zn(()=>{g.current=!1,bf(l,h),f.current=d}),xf(()=>{g.current=!0,h.clear(),u.clear()}),g.current)return p.createElement(p.Fragment,null,d.map(v=>p.createElement(vn,{key:Ne(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:r,mode:o},v)));d=[...d];const y=f.current.map(Ne),x=l.map(Ne),w=y.length;for(let v=0;v<w;v++){const b=y[v];x.indexOf(b)===-1&&!u.has(b)&&u.set(b,void 0)}return o==="wait"&&u.size&&(d=[]),u.forEach((v,b)=>{if(x.indexOf(b)!==-1)return;const P=h.get(b);if(!P)return;const T=y.indexOf(b);let S=v;if(!S){const V=()=>{u.delete(b);const C=Array.from(h.keys()).filter(A=>!x.includes(A));if(C.forEach(A=>h.delete(A)),f.current=l.filter(A=>{const D=Ne(A);return D===b||C.includes(D)}),!u.size){if(c.current===!1)return;a(),i&&i()}};S=p.createElement(vn,{key:Ne(P),isPresent:!1,onExitComplete:V,custom:t,presenceAffectsLayout:r,mode:o},P),u.set(b,S)}d.splice(T,0,S)}),d=d.map(v=>{const b=v.key;return u.has(b)?v:p.createElement(vn,{key:Ne(v),isPresent:!0,presenceAffectsLayout:r,mode:o},v)}),p.createElement(p.Fragment,null,u.size?d:d.map(v=>p.cloneElement(v)))};function Tf({children:e,isValidProp:t,...n}){t&&Rr(t),n={...p.useContext(Lt),...n},n.isStatic=di(()=>n.isStatic);const i=p.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return p.createElement(Lt.Provider,{value:i},e)}async function Bo(e,t,n,i,s=Zo()){const r=e.withConfig({apiVersion:Ga});try{const o=new Date(Date.now()+1e3*Ha),a=`${Ka}.${s}`,c=function(){if(typeof crypto<"u"){const d=new Uint8Array(16);crypto.getRandomValues(d);let u="";for(let f=0;f<d.length;f++)u+=d[f].toString(16).padStart(2,"0");return u=btoa(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),u}return Math.random().toString(36).slice(2)}(),l=r.patch(a).set({secret:c,source:t,studioUrl:n,userId:i});return await r.transaction().createOrReplace({_id:a,_type:vr}).patch(l).commit({tag:Xa}),{secret:c,expiresAt:o}}finally{await r.delete({query:qa})}}function Sf(e){const{draftMode:t,previewMode:n,origin:i=typeof location>"u"?"https://localhost":location.origin}=e,s=(n==null?void 0:n.enable)||(t==null?void 0:t.enable);let{preview:r="/"}=e;const o=new URL(r,i),a=s?new URL(s,i):void 0;return async c=>{try{if(c.previewSearchParam){const d=new URL(c.previewSearchParam,o);d.origin===o.origin&&(r=`${d.pathname}${d.search}`)}else if(c.referrer){const d=new URL(c.referrer);d.origin===o.origin&&(r=`${d.pathname}${d.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&c.studioBasePath&&(r.startsWith(`${c.studioBasePath}/`)||r===c.studioBasePath)&&(r=e.preview||"/");const l=new URL(r,o);if(a){const d=new URL(a),{searchParams:u}=d;return u.set(Gt,c.previewUrlSecret),l.pathname!==d.pathname&&u.set(Yn,`${l.pathname}${l.search}`),d.toString()}return l.toString()}}const Cf=e=>typeof e=="object"&&typeof e.then=="function",St=[];function Af(e,t,n=(i,s)=>i===s){if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let s=0;s<i;s++)if(!n(e[s],t[s]))return!1;return!0}function jf(e,t=null,n=!1,i={}){t===null&&(t=[e]);for(const r of St)if(Af(t,r.keys,r.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!n)throw r.promise}const s={keys:t,equal:i.equal,remove:()=>{const r=St.indexOf(s);r!==-1&&St.splice(r,1)},promise:(Cf(e)?e:e(...t)).then(r=>{s.response=r,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(r=>s.error=r)};if(St.push(s),!n)throw s.promise}const Ws=(e,t,n)=>jf(e,t,!1,n);var Vf=Object.defineProperty,Ef=(e,t,n)=>(((i,s,r)=>{s in i?Vf(i,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[s]=r})(e,typeof t!="symbol"?t+"":t,n),n);let Ct;const kf=new Uint8Array(16);function Rf(){if(!Ct&&(Ct=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ct))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ct(kf)}const Z=[];for(let e=0;e<256;++e)Z.push((e+256).toString(16).slice(1));var Ks={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Et(e,t,n){if(Ks.randomUUID&&!t&&!e)return Ks.randomUUID();const i=(e=e||{}).random||(e.rng||Rf)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=i[s];return t}return function(s,r=0){return Z[s[r+0]]+Z[s[r+1]]+Z[s[r+2]]+Z[s[r+3]]+"-"+Z[s[r+4]]+Z[s[r+5]]+"-"+Z[s[r+6]]+Z[s[r+7]]+"-"+Z[s[r+8]]+Z[s[r+9]]+"-"+Z[s[r+10]]+Z[s[r+11]]+Z[s[r+12]]+Z[s[r+13]]+Z[s[r+14]]+Z[s[r+15]]}(i)}const Df=1e3,Mf=1e3,Lf=500,If=["handshake/syn","handshake/syn-ack","handshake/ack"],Gs=e=>If.some(t=>t===e),Of=({data:e={}})=>typeof e=="object"&&e!==null&&!Array.isArray(e)&&!("domain"in e)&&["id","type","from","to"].every(t=>t in e)&&e.type.startsWith("handshake/");function Hs(e){const t=e.target,n=e.connectTo.map(u=>({buffer:[],config:u,id:"",handler:s,status:"connecting",interval:void 0,heartbeat:void 0}));function i(u){window.clearInterval(u.interval)}function s(u){const{data:f}=u;if(Gs(f.type)){const h=n.find(g=>g.config.id===f.from);h&&f.type==="handshake/syn-ack"&&(c(h,"connected"),l(h,"handshake/ack",{id:h.id}))}}const r=u=>{var f,h,g;const{data:y}=u;if(!Gs(y.type)&&n.find(x=>x.id===y.connectionId)){const x=n.find(w=>w.config.id===y.from);if(x){const w=[y.type,y.data];(h=(f=x.config).onEvent)==null||h.call(f,...w),(g=e.onEvent)==null||g.call(e,...w),d(x,"channel/response",{responseTo:y.id},!1)}}};function o(u){var f;if(Of(u))console.error(`Visual editing package mismatch detected! Please ensure you are using the latest version of Sanity Studio and any packages listed here:
https://github.com/sanity-io/visual-editing`);else if(function(h){const{data:g,origin:y}=h;return g.domain==="sanity/channels"&&g.to==e.id&&n.map(x=>x.config.id).includes(g.from)&&g.type!=="channel/response"&&y===e.targetOrigin}(u)){const{data:h}=u;(f=n.find(g=>g.config.id===h.from))==null||f.handler(u)}}function a(u){u.heartbeat&&window.clearInterval(u.heartbeat)}function c(u,f){var h,g,y;u.status=f,(g=(h=u.config).onStatusUpdate)==null||g.call(h,f,u.config.id),(y=e.onStatusUpdate)==null||y.call(e,f,u.config.id),f==="connecting"||f==="reconnecting"?(u.handler=s,a(u),function(x){x.id=Et(),x.interval=window.setInterval(()=>{l(x,"handshake/syn",{id:x.id})},Lf)}(u)):f==="connected"?(u.handler=r,i(u),function(x){if(a(x),x.config.heartbeat){const w=typeof x.config.heartbeat=="number"?x.config.heartbeat:Mf;x.heartbeat=window.setInterval(()=>{d(x,"channel/heartbeat")},w)}}(u),function(x){const w=[...x.buffer];x.buffer.splice(0,x.buffer.length),w.forEach(({type:v,data:b})=>{d(x,v,b)})}(u)):f==="disconnected"&&(u.id=null,u.handler=s,i(u),a(u))}function l(u,f,h){if(!u.id)throw new Error("No channel ID set");const g={connectionId:u.id,data:h,domain:"sanity/channels",from:e.id,id:Et(),to:u.config.id,type:f};try{t==null||t.postMessage(g,{targetOrigin:"*"})}catch{throw new Error(`Failed to postMessage '${g.id}' on '${e.id}'`)}}function d(u,f,h,g=!0){const y=Et();if(u.status==="connecting"||u.status==="reconnecting"||u.status==="disconnected")return void u.buffer.push({type:f,data:h});if(!u.id)throw new Error("No channel ID set");const x={connectionId:u.id,data:h,domain:"sanity/channels",from:e.id,id:y,to:u.config.id,type:f};if(g){const w=setTimeout(()=>{x.connectionId===u.id&&(window.removeEventListener("message",v,!1),f!=="channel/heartbeat"&&u.buffer.push({type:f,data:h}),c(u,"reconnecting"),console.warn(`Received no response to message '${x.type}' on client '${e.id}' (ID: '${x.id}').`))},Df),v=b=>{var P;const{data:T}=b;T.type==="channel/response"&&(P=T.data)!=null&&P.responseTo&&T.data.responseTo===x.id&&(window.removeEventListener("message",v,!1),clearTimeout(w))};window.addEventListener("message",v,!1)}try{t==null||t.postMessage(x,{targetOrigin:e.targetOrigin})}catch{throw new Error(`Failed to postMessage '${x.id}' on client '${e.id}'`)}}return window.addEventListener("message",o,!1),n.forEach(u=>{c(u,"connecting")}),{destroy:function(){n.forEach(u=>{["disconnected"].includes(u.status)||(d(u,"channel/disconnect",{id:u.id},!1),c(u,"disconnected"))}),window.removeEventListener("message",o,!1),n.forEach(u=>{a(u),i(u)})},send:function(u,f,h){(u?Array.isArray(u)?[...u]:[u]:n).forEach(g=>{const y=n.find(x=>x.config.id===g);if(!y)throw new Error("Invalid channel ID");d(y,f,h)})}}}const Ff=/^([A-Za-z]+):([0-9]+)$/,Bf=/^([A-Za-z]+):([0-9]+),([0-9]+)$/,$f=/^([A-Za-z]+):([a-z0-9]+)$/,qs={alt:"altKey",ctrl:"ctrlKey",mod:typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey",shift:"shiftKey"};function Xs(e){return e.key==="Alt"}function Ti(e){const{children:t,message:n,onRetry:i,onContinueAnyway:s,...r}=e,o=m.jsx(xe,{fontSize:1,mode:"ghost",onClick:i,text:"Retry"}),a=m.jsx(xe,{fontSize:1,mode:"ghost",tone:"critical",onClick:s,text:"Continue anyway"});return m.jsx(Ce,{height:"fill",...r,children:m.jsx(J,{align:"center",height:"fill",justify:"center",children:m.jsx(ma,{padding:4,sizing:"border",width:0,children:m.jsxs(Ie,{space:4,children:[m.jsxs(Ie,{space:3,children:[m.jsx(q,{size:1,weight:"semibold",children:"An error occured"}),m.jsx(q,{muted:!0,size:1,children:n})]}),t,i&&s?m.jsxs(ga,{space:2,children:[o,a]}):i?m.jsx(be,{children:o}):s?m.jsx(be,{children:a}):null]})})})})}function en(){const e=p.useContext(lr);if(!e)throw new Error("Presentation context is missing");return e}function Uf(e){const t=["comment","inspect","instruction","pathKey","rev","since","template","view"];return function(n={}){const i=Object.entries(n).map(([s,r])=>`${s}=${r}`).join("&");return i.length?`?${i}`:""}(Object.entries(e).filter(([n])=>t.includes(n)).reduce((n,[i,s])=>s==null?n:{...n,[i]:s},{}))}const _f=p.forwardRef(function(e,t){const{deskParams:n,params:i}=en();return m.jsx(Hn,{...e,ref:t,state:{type:void 0,_searchParams:Object.entries({...n,preview:i.preview})},title:void 0})}),zf=p.forwardRef(function(e,t){const{documentId:n,documentType:i,parentRefPath:s,template:r,...o}=e;return m.jsx(Hn,{...o,ref:t,state:{id:n,type:i},title:void 0})});function $o(e){const{children:t,params:n,onDeskParams:i,previewUrl:s,refs:r}=e,{state:o,resolvePathFromState:a}=ar(),c=cr(Object.fromEntries(o._searchParams||[])),l=p.useCallback(u=>`${a(o)}${Uf({...c,...u})}`,[a,c,o]),d=p.useMemo(()=>({index:0,groupIndex:0,siblingIndex:0,payload:{},params:n,hasGroupSiblings:!1,groupLength:1,routerPanesState:[],ChildLink:u=>{const{childId:f,...h}=u,g=r==null?void 0:r.find(y=>y._id===f||pr(y._id)===f);return g?m.jsx(Hn,{...h,state:{id:f,type:g._type,_searchParams:Object.entries({preview:s})}}):m.jsx("div",{...h})},BackLink:_f,ReferenceChildLink:zf,ParameterizedLink:()=>m.jsx(m.Fragment,{children:"ParameterizedLink"}),closeCurrentAndAfter:()=>{console.warn("closeCurrentAndAfter")},handleEditReference:u=>{console.warn("handleEditReference",u)},replaceCurrent:u=>{console.warn("replaceCurrent",u)},closeCurrent:()=>{console.warn("closeCurrent")},duplicateCurrent:u=>{console.warn("duplicateCurrent",u)},setView:u=>{console.warn("setView",u)},setParams:u=>{var f;i({...u,inspect:(f=u.inspect)!=null?f:void 0})},setPayload:u=>{console.warn("setPayload",u)},navigateIntent:(u,f,h)=>{console.warn("navigateIntent",u,f,h)},createPathWithParams:l}),[l,i,n,s,r]);return m.jsx(Va.Provider,{value:d,children:t})}const Nf=ye(ur)`
  height: 100%;
`,Wf=ye(J)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,Kf=ye(Mt)`
  white-space: pre-wrap;
`;function Gf(e){const{onDeskParams:t,previewUrl:n,refs:i}=e,{devMode:s}=en(),r=p.useMemo(()=>({id:"$root",options:{filter:"_id in $ids",params:{ids:i.map(d=>d._id)}},schemaTypeName:"",title:"Documents on this page",type:"documentList"}),[i]),[o,a]=p.useState(null),c=p.useCallback(()=>a(null),[]),[l]=p.useState(()=>({}));return p.useEffect(()=>a(null),[i]),o?m.jsx(Ti,{flex:1,message:"Could not render the document list",onRetry:c,children:s&&m.jsx(Ce,{overflow:"auto",padding:3,radius:2,tone:"critical",children:m.jsxs(Ie,{space:3,children:[m.jsx(Dt,{muted:!0,size:0,children:"Error message"}),m.jsx(Kf,{size:1,children:o.error.message})]})})}):m.jsx(fr,{onCatch:a,children:m.jsx(Nf,{children:m.jsx(hr,{children:m.jsx($o,{params:l,onDeskParams:t,previewUrl:n,refs:i,children:m.jsx(Wf,{direction:"column",flex:1,children:m.jsx(ja,{index:0,itemId:"$root",pane:r,paneKey:"$root"})})})})})})}const Hf=ye(Mt)`
  white-space: pre-wrap;
`;function qf(e){const{documentId:t,documentType:n,params:i,onDeskParams:s,onFocusPath:r}=e,{template:o,templateParams:a}=i,{devMode:c}=en(),l=p.useMemo(()=>({id:t,options:{id:t,type:n,template:o,templateParameters:Ea(a)},title:"",type:"document"}),[t,n,o,a]),[d,u]=p.useState(null),f=p.useCallback(()=>u(null),[]);p.useEffect(()=>{u(null)},[t,n,i]);const{setLayoutCollapsed:h}=ka(),g=p.useCallback(()=>h(!0),[h]),y=p.useCallback(()=>h(!1),[h]);return d?m.jsx(Ti,{flex:1,message:"Could not render the document editor",onRetry:f,children:c&&m.jsx(Ce,{overflow:"auto",padding:3,radius:2,tone:"critical",children:m.jsxs(Ie,{space:3,children:[m.jsx(Dt,{muted:!0,size:0,children:"Error message"}),m.jsx(Hf,{size:1,children:d.error.message})]})})}):m.jsx(fr,{onCatch:u,children:m.jsx(ur,{style:{height:"100%"},onExpand:y,onCollapse:g,children:m.jsx($o,{onDeskParams:s,params:i,children:m.jsx(Ra,{paneKey:"document",index:1,itemId:"document",pane:l,onFocusPath:r})})})})}function Xf(e){const{deskParams:t,documentId:n,documentType:i,onDeskParams:s,onFocusPath:r}=e;return m.jsx(hr,{children:m.jsx(qf,{documentId:n,documentType:i,params:t,onDeskParams:s,onFocusPath:r})})}function Yf(e){const{deskParams:t,documentId:n,documentType:i,onDeskParams:s,onFocusPath:r,previewUrl:o,refs:a}=e;return n&&i?m.jsx(Xf,{deskParams:t,documentId:n,documentType:i,onDeskParams:s,onFocusPath:r}):m.jsx(Gf,{onDeskParams:s,previewUrl:o,refs:a})}const tn=p.createContext(null);tn.displayName="PanelsContext";const Zf=ye.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,$n=function({children:e,defaultSize:t=null,id:n,minWidth:i,maxWidth:s,order:r=0}){const o=p.useContext(tn);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:a,registerElement:c,unregisterElement:l}=o,d=a(n);return p.useLayoutEffect(()=>(c(n,{id:n,type:"panel",defaultSize:t,maxWidth:s??null,minWidth:i??0,order:r}),()=>{l(n)}),[n,t,r,s,i,c,l]),m.jsx(Zf,{style:d,children:e})},Jf=ye.div`
  position: relative;
`,Qf=ye.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:e})=>e?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:e})=>!e&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,Uo=function({id:e,order:t,disabled:n=!1}){const i=p.useRef(null),s=p.useContext(tn);if(s===null)throw Error("Panel components must be rendered within a PanelGroup container");const r=function(x){return p.useRef(x||Et()).current}(e),{activeResizer:o,drag:a,startDragging:c,stopDragging:l,registerElement:d,unregisterElement:u}=s,f=o===r;if(s===null)throw Error("Panel components must be rendered within a PanelGroup container");const h=p.useCallback(x=>{c(r,x.nativeEvent)},[r,c]),g=p.useCallback(x=>{a(r,x)},[r,a]),y=p.useCallback(()=>{i.current.blur(),l()},[l]);return p.useEffect(()=>{if(f&&!n)return window.addEventListener("mousemove",g),window.addEventListener("mouseup",y),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y)}},[n,f,g,y]),p.useLayoutEffect(()=>(d(r,{id:r,order:t,type:"resizer",el:i}),()=>{u(r)}),[r,t,d,u]),m.jsx(Jf,{onMouseDown:h,ref:i,children:m.jsxs(Qf,{$disabled:n,children:[m.jsx("span",{}),m.jsx("span",{})]})})};function _o(e,t){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(e,i)},t)}}const zo="presentation/panels",Ys=()=>JSON.parse(localStorage.getItem(zo)||"{}"),Zs=e=>e.map(t=>[t.id,t.order].join(":")).join(",");function eh(){return p.useMemo(()=>{const e=(t,n)=>{(i=>{localStorage.setItem(zo,JSON.stringify(i))})({...Ys(),[Zs(t)]:n})};return{get:t=>Ys()[Zs(t)],set:e,setDebounced:_o(e,100)}},[])}function Un(e,t,n){const{maxWidth:i,minWidth:s}=e,r=i==null?100:i/n*100,o=s/n*100;return Math.min(r,Math.max(o,t))}function th(e,t,n){if(e.length===1)return"100";const i=n[e.findIndex(s=>s.id===t)];return i==null?"0":i.toPrecision(10)}function Js(e,t,n=0,i=null){return e.clientX-(i||t.getBoundingClientRect()).left-n}function xn(e){return e.type==="panel"}function Qs(e){return e.type==="resizer"}function er(e){return Array.from(e.values()).sort(({order:t},{order:n})=>t==null&&n==null?0:t==null?-1:n==null?1:t-n)}function tr(e,t,n){const i=t.reduce((o,a)=>o+a,0),s=[...t].map(o=>o/i*100);let r=0;for(let o=0;o<e.length;o++){const a=e[o],c=s[o],l=Un(a,c,n);c!=l&&(r+=c-l,s[o]=l)}if(r.toFixed(3)!=="0.000")for(let o=0;o<e.length;o++){const a=e[o];let{maxWidth:c,minWidth:l}=a;l=l/n*100,c!=null&&(c=c/n*100);const d=Math.min(c??100,Math.max(l,s[o]+r));if(d!==s[o]&&(r-=d-s[o],s[o]=d,Math.abs(r).toFixed(3)==="0.000"))break}return s}const nh=ye.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,ih=function({children:e}){const t=p.useRef(null),[n,i]=p.useState(new Map),s=p.useMemo(()=>er(n).filter(xn),[n]),[r,o]=p.useState([]),[a,c]=p.useState(null),l=p.useRef({elements:n,panels:s,widths:r}),d=p.useCallback(b=>({flexGrow:th(s,b,r),pointerEvents:a===null?void 0:"none"}),[a,s,r]),u=p.useCallback((b,P)=>{i(T=>{if(T.has(b))return T;const S=new Map(T);return S.set(b,P),S})},[]),f=p.useCallback(b=>{i(P=>{if(!P.has(b))return P;const T=new Map(P);return T.delete(b),T})},[]),h=p.useRef({containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]}),g=p.useCallback((b,P)=>{const T=er(n),S=T.findIndex(A=>A.id===b),V=n.get(b);if(!V||!Qs(V))return;const C=V.el.current;C&&(h.current={resizerIndex:S,panelBefore:T.reduce((A,D,I)=>xn(D)&&I<S?D:A,null),panelAfter:T.reduce((A,D,I)=>A===null&&xn(D)&&I>S?D:A,null),containerWidth:window.innerWidth,startX:P.pageX,dragOffset:Js(P,C),resizerRect:C.getBoundingClientRect(),widths:l.current.widths},c(b))},[n]),y=p.useCallback(()=>{c(null)},[]),x=p.useCallback((b,P)=>{P.preventDefault(),P.stopPropagation();const{containerWidth:T,dragOffset:S,panelBefore:V,panelAfter:C,resizerRect:A}=h.current;if(V==null||C==null)return;const D=n.get(b);if(!D||!Qs(D))return;const I=D.el.current;if(!I)return;const K=Js(P,I,S,A);if(K===0)return;const{widths:W}=l.current,_=function(B,O,F,se,ne,Pe){const{panels:k,widths:ie}=ne,{widths:re}=Pe,ce=re||ie,ve=[...ce];{const oe=B<0?se:F,X=ce[k.findIndex(gt=>gt.id===oe.id)],G=Un(oe,X+Math.abs(B),O);if(X===G)return ce;B=B<0?X-G:G-X}let le=0,Te=B<0?F:se,he=k.findIndex(oe=>oe.id===Te.id);for(;;){const oe=k[he],X=ce[he],G=Un(oe,X-(Math.abs(B)-Math.abs(le)),O);if(X!==G&&(le+=X-G,ve[he]=G,le.toPrecision(10).localeCompare(Math.abs(B).toPrecision(10),void 0,{numeric:!0})>=0))break;if(B<0){if(--he<0)break}else if(++he>=k.length)break}return le===0?ce:(Te=B<0?se:F,he=k.findIndex(oe=>oe.id===Te.id),ve[he]=ce[he]+le,ve)}(K/t.current.getBoundingClientRect().width*100,T,V,C,l.current,h.current);W.some((B,O)=>B!==_[O])&&o(_)},[n]);p.useLayoutEffect(()=>{l.current.elements=n,l.current.panels=s,l.current.widths=r},[n,s,r]);const w=eh();p.useLayoutEffect(()=>{const{widths:b}=l.current;if(b.length===s.length)return;const P=w.get(s);if(P){const S=tr(s,P,window.innerWidth);return void o(S)}const T=function(S){let V=S.length,C=100;const A=S.map(I=>I.defaultSize?(C-=I.defaultSize,V-=1,I.defaultSize):null),D=C/V;return A.map(I=>I===null?D:I)}(s);o(T)},[w,s]),p.useEffect(()=>{r.length&&w.setDebounced(s,r)},[w,s,r]),p.useLayoutEffect(()=>{const b=new ResizeObserver(()=>{const{panels:P,widths:T}=l.current,S=tr(P,T,window.innerWidth);T.some((V,C)=>V!==S[C])&&o(S)});return b.observe(t.current),()=>{b.disconnect()}},[]);const v=p.useMemo(()=>({activeResizer:a,drag:x,getPanelStyle:d,registerElement:u,startDragging:g,stopDragging:y,unregisterElement:f}),[a,x,d,u,g,y,f]);return m.jsx(tn.Provider,{value:v,children:m.jsx(nh,{ref:t,children:e})})},sh=function(e){const{children:t,navigate:n}=e,i=p.useCallback((s,r=void 0)=>{n(r||{},s?{preview:s}:{})},[n]);return m.jsx(ya.Provider,{value:i,children:t})};function rh(e){const{unstable_navigator:t}=e,n=!(t==null||!t.component),[i,s]=function(c,l){const[d,u]=p.useState(()=>{var f;return JSON.parse((f=localStorage.getItem(c))!=null?f:JSON.stringify(l))});return p.useEffect(()=>{localStorage.setItem(c,JSON.stringify(d))},[c,d]),[d,u]}("presentation/navigator",n),r=!!n&&i,o=p.useMemo(()=>{if(n)return()=>s(c=>!c)},[n,s]),a=p.useCallback(function(){return m.jsx(m.Fragment,{children:r&&m.jsx(oh,{...t})})},[r,t]);return[{navigatorEnabled:r,toggleNavigator:o},a]}const oh=p.memo(function(e){const{minWidth:t,maxWidth:n,component:i}=e,s=t!=null&&n!=null&&t===n;return m.jsxs(m.Fragment,{children:[m.jsx($n,{id:"navigator",minWidth:t,maxWidth:n,order:1,children:m.jsx(i,{})}),m.jsx(Uo,{order:2,disabled:s})]})}),ah=function(e){const{children:t,params:n}=e,i=p.useMemo(()=>n,[n]);return m.jsx(va.Provider,{value:i,children:t})},ch=function(e){const{children:t,deskParams:n,devMode:i,name:s,navigate:r,params:o}=e,a=p.useMemo(()=>({deskParams:n,devMode:i,name:s,navigate:r,params:o}),[n,i,s,r,o]);return m.jsx(lr.Provider,{value:a,children:t})};var lh=class extends Error{constructor(e){super(e[0].message),Ef(this,"issues"),this.name="ValiError",this.issues=e}};function _n(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}function No(e,t,n,i,s){var r,o,a,c,l;const d=(l=(c=(a=(o=(r=t.message)!=null?r:function(u,f){var h;return(h=void 0)==null?void 0:h.get(f)}(n,s.lang))!=null?o:e?(s.lang,void 0):null)!=null?a:i==null?void 0:i.message)!=null?c:function(u){}(s.lang))!=null?l:s.message;return typeof d=="function"?d(s):d}function nn(e,t,n){return{typed:e,output:t,issues:n}}function Si(e){let t=typeof e;return t==="object"&&(t=e?Object.getPrototypeOf(e).constructor.name:"null"),t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t}function uh(e,t,n){var i;const s=(i=n.received)!=null?i:Si(n.input),r={reason:e.type,context:n.context.type,expected:n.context.expects,received:s,message:`Invalid ${n.label}: ${n.context.expects?`Expected ${n.context.expects} but r`:"R"}eceived ${s}`,input:n.input,requirement:n.context.requirement,path:n.path,lang:t==null?void 0:t.lang,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe};return r.message=No(!1,n.context,n.reference,t,r),r}function Wo(e,t,n,i){if(e.pipe&&(n==null||!n.skipPipe))for(const s of e.pipe){const r=s._parse(t);if(r.issues){for(const o of r.issues){const a=uh(e,n,o);i?i.push(a):i=[a]}if(n!=null&&n.abortEarly||n!=null&&n.abortPipeEarly)break}else t=r.output}return nn(!0,t,i)}function Ci(e,t,n,i,s){var r,o;const a=Si(n),c=(r=s==null?void 0:s.expected)!=null?r:e.expects,l={reason:(o=s==null?void 0:s.reason)!=null?o:"type",context:e.type,expected:c,received:a,message:`Invalid type: Expected ${c} but received ${a}`,input:n,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:i==null?void 0:i.lang,abortEarly:i==null?void 0:i.abortEarly,abortPipeEarly:i==null?void 0:i.abortPipeEarly,skipPipe:i==null?void 0:i.skipPipe};return l.message=No(!0,e,t,i,l),{typed:!1,output:n,issues:[l]}}function Ko(e,t){return{...e,fallback:t,_parse(n,i){const s=e._parse(n,i);return s.issues?nn(!0,function(r,o){return typeof r.fallback=="function"?r.fallback(o):r.fallback}(this,{input:n,issues:s.issues})):s}}}function kt(e,t,n,i){const[s,r,o]=function(c,l,d){if(!c||typeof c=="object"&&!Array.isArray(c)){const[h,g]=_n(l,d);return[c,h,g]}const[u,f]=_n(c,l);return[void 0,u,f]}(t,n,i);let a;return{type:"object",expects:"Object",async:!1,entries:e,rest:s,message:r,pipe:o,_parse(c,l){if(c&&typeof c=="object"){a=a??Object.entries(this.entries);let d,u=!0;const f={};for(const[h,g]of a){const y=c[h],x=g._parse(y,l);if(x.issues){const w={type:"object",origin:"value",input:c,key:h,value:y};for(const v of x.issues)v.path?v.path.unshift(w):v.path=[w],d==null||d.push(v);if(d||(d=x.issues),l!=null&&l.abortEarly){u=!1;break}}x.typed||(u=!1),(x.output!==void 0||h in c)&&(f[h]=x.output)}if(this.rest&&(l==null||!l.abortEarly||!d)){for(const h in c)if(!(h in this.entries)){const g=c[h],y=this.rest._parse(g,l);if(y.issues){const x={type:"object",origin:"value",input:c,key:h,value:g};for(const w of y.issues)w.path?w.path.unshift(x):w.path=[x],d==null||d.push(w);if(d||(d=y.issues),l!=null&&l.abortEarly){u=!1;break}}y.typed||(u=!1),f[h]=y.output}}return u?Wo(this,f,l,d):nn(!1,f,d)}return Ci(this,kt,c,l)}}}function sn(e,t){return{type:"picklist",expects:e.map(Si).join(" | "),async:!1,options:e,message:t,_parse(n,i){return this.options.includes(n)?nn(!0,n):Ci(this,sn,n,i)}}}function zn(e,t,n){const i=e._parse(t,function(s){var r,o,a,c;return{lang:(r=s==null?void 0:s.lang)!=null?r:void 0,message:s==null?void 0:s.message,abortEarly:(o=s==null?void 0:s.abortEarly)!=null?o:void 0,abortPipeEarly:(a=s==null?void 0:s.abortPipeEarly)!=null?a:void 0,skipPipe:(c=s==null?void 0:s.skipPipe)!=null?c:void 0}}(n));if(i.issues)throw new lh(i.issues);return i.output}const Ai="ACTION_IFRAME_LOADED",Nn="ACTION_IFRAME_REFRESH",Wn="ACTION_IFRAME_RELOAD",Kn="ACTION_PERSPECTIVE",Gn="ACTION_VIEWPORT",Go="ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE",dh=(e,t)=>{switch(t.type){case Ai:return e.iframe.status==="loaded"?e:{...e,iframe:{...e.iframe,status:"loaded"}};case Nn:return e.iframe.status==="refreshing"?e:{...e,iframe:{...e.iframe,status:"refreshing"}};case Wn:return e.iframe.status==="reloading"?e:{...e,iframe:{...e.iframe,status:"reloading"}};case Kn:return{...e,perspective:zn(Ho,t.perspective)};case Gn:return{...e,viewport:zn(qo,t.viewport)};case Go:return fh(e,t);default:return e}},fh=(e,t)=>e.visualEditing.overlaysEnabled===t.enabled?e:{...e,visualEditing:{...e.visualEditing,overlaysEnabled:t.enabled}},hh=sn(["loading","loaded","refreshing","reloading"]),Ho=Ko(sn(["published","previewDrafts"]),"previewDrafts"),qo=Ko(sn(["desktop","mobile"]),"desktop"),ph=kt({iframe:kt({status:hh}),perspective:Ho,viewport:qo,visualEditing:kt({overlaysEnabled:function e(t,n){const[i,s]=_n(t,n);return{type:"boolean",expects:"boolean",async:!1,message:i,pipe:s,_parse(r,o){return typeof r=="boolean"?Wo(this,r,o):Ci(this,e,r,o)}}}()})}),mh={iframe:{status:"loading"},perspective:"previewDrafts",viewport:"desktop",visualEditing:{overlaysEnabled:!1}};function gh(e){return zn(ph,{...mh,...e})}const yh=Oo(ye.iframe`
  border: 0;
  max-height: 100%;
  width: 100%;
  display: block;
`),vh=function(e){var t;const{basePath:n="/"}=((t=dr())==null?void 0:t.activeWorkspace)||{},{fontSize:i=1,onChange:s,origin:r,padding:o=3,value:a}=e,c=p.useRef(null),[l,d]=p.useState(void 0),[u,f]=p.useState(void 0),h=p.useCallback(w=>{d(w.currentTarget.value)},[]),g=p.useCallback(w=>{var v;if(w.key==="Enter"){if(l===void 0)return;const b=l.startsWith("/")||l===""?`${r}${l}`:l;if(!b.startsWith(r+"/")&&b!==r)return void f(`URL must start with ${r}`);if(!r&&(b.startsWith(`${n}/`)||b===n))return void f(`URL can't have the same base path as the Studio ${n}`);const P=b===r?r+"/":b;f(void 0),d(void 0),s(P.slice(r.length)),(v=c.current)==null||v.blur()}w.key==="Escape"&&(f(void 0),d(void 0))},[n,s,r,l]),y=p.useCallback(()=>{f(void 0),d(void 0)},[]);p.useEffect(()=>{f(void 0),d(void 0)},[r,a]);const x=p.useMemo(()=>({icon:xa}),[]);return m.jsx(m.Fragment,{children:m.jsx(ba,{clearButton:u?x:void 0,customValidity:u,fontSize:i,onBlur:y,onClear:()=>{f(void 0),d(r+a)},onChange:h,onKeyDownCapture:g,padding:o,style:{zIndex:1},radius:2,ref:c,space:o,value:l===void 0?`${r}${a}`:l})})};function xh(e){const{initialUrl:t,openPopup:n,previewLocationOrigin:i,previewLocationRoute:s}=e,r=p.useCallback(o=>{o.preventDefault(),n(o.currentTarget.href)},[n]);return m.jsxs(m.Fragment,{children:[m.jsx(bh,{initialUrl:t,previewLocationOrigin:i,previewLocationRoute:s}),m.jsx(Rt,{icon:wa,text:"Open preview",as:"a",href:`${i}${s}`,onClick:r,rel:"opener",target:"_blank"})]})}function bh(e){const{initialUrl:t,previewLocationOrigin:n,previewLocationRoute:i}=e,{push:s}=Pa(),r=Tn({apiVersion:Sn}),o=Cn(),[a,c]=p.useState(!1);return m.jsx(Rt,{disabled:a,onClick:()=>{if(navigator==null||!navigator.clipboard)return s({closable:!0,status:"error",title:"Clipboard not supported"}),!1;c(!0);let l,d=`${n}${i}`;const u=()=>{s({id:l,closable:!0,status:"success",title:"The URL is copied to the clipboard"}),c(!1)},f=h=>{s({closable:!0,status:"error",title:"Copy failed",description:h.message||h.toString()}),c(!1)};if(Za(t)&&typeof ClipboardItem<"u"){const h="text/plain",g=new ClipboardItem({[h]:(async()=>{l=s({closable:!0,title:"Copying URL to clipboard"});const y=await Bo(r,"@sanity/presentation",typeof window>"u"?"":location.href,o==null?void 0:o.id);return d=Ja(t,y.secret,i).toString(),new Blob([d],{type:h})})()});navigator.clipboard.write([g]).then(u).catch(f)}else navigator.clipboard.writeText(d).then(u).catch(f)},text:"Copy link",icon:Ta})}const bn=Oo(J),wh=ye(Sa)`
  & > span {
    width: 21px;
    height: 13px;
    overflow: hidden;

    & > span:nth-child(1) {
      width: 21px;
      height: 13px;
    }

    & > span:nth-child(2) {
      width: 9px;
      height: 9px;
      top: 2px;
      left: 2px;
    }
  }

  & input:checked + span {
    & > span:nth-child(2) {
      transform: translate3d(8px, 0, 0) !important;
    }
  }
`,wn={previewDrafts:"Drafts",published:"Published"},Ph="caution",Th="positive",nr={previewDrafts:Ca,published:Aa},Sh=p.forwardRef(function(e,t){const{dispatch:n,iframe:i,initialUrl:s,loadersConnection:r,navigatorEnabled:o,onPathChange:a,onRefresh:c,openPopup:l,overlaysConnection:d,params:u,perspective:f,targetOrigin:h,toggleNavigator:g,toggleOverlay:y,viewport:x,visualEditing:{overlaysEnabled:w}}=e,{devMode:v}=en(),b=Jo(),P=p.useCallback(()=>n({type:Gn,viewport:"desktop"}),[n]),T=p.useCallback(()=>n({type:Gn,viewport:"mobile"}),[n]),S=i.status==="loading"||i.status==="reloading",[V,C]=p.useState(!1),A=i.status==="refreshing",[D,I]=p.useState(!1),K=S||A||d==="connecting",W=p.useMemo(()=>h===location.origin?"":h,[h]),_=p.useCallback(()=>{c(()=>{typeof t=="function"||t==null||!t.current||(n({type:Wn}),t.current.src=`${h}${u.preview||"/"}`)})},[n,c,u.preview,h,t]),B=p.useCallback(()=>{typeof t=="function"||t==null||!t.current||(t.current.src=s.toString(),n({type:Wn}))},[n,t,s]),O=p.useCallback(()=>{se(!0)},[]),[F,se]=p.useState(!1),[ne,Pe]=p.useState(!1);p.useEffect(()=>{if(!(S||A||d!=="connecting"&&d!=="reconnecting")){const re=setTimeout(()=>{Pe(!0)},1e3);return()=>clearTimeout(re)}},[d,S,A]),p.useEffect(()=>{if(!S&&!A&&ne){if(d==="connected"&&(I(!1),Pe(!1),C(!1),se(!1)),d==="connecting"){const re=setTimeout(()=>{C(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},Vi);return()=>clearTimeout(re)}if(d==="reconnecting"){const re=setTimeout(()=>{C(!0),I(!0)},Vi);return()=>clearTimeout(re)}d==="disconnected"&&I(!0)}},[S,d,A,ne]);const k=p.useMemo(()=>{const re=new URL(u.preview||"/",h),{pathname:ce,search:ve}=Ya(re);return`${ce}${ve}`},[u.preview,h]),ie=p.useCallback(()=>{n({type:Ai})},[n]);return m.jsx(Tf,{transition:b?{duration:0}:void 0,children:m.jsxs(Qo,{delay:1e3,children:[m.jsx(Ce,{flex:"none",padding:2,shadow:1,style:{position:"relative"},children:m.jsxs(J,{align:"center",gap:2,style:{minHeight:0},children:[g&&m.jsx(tt,{animate:!0,content:m.jsx(q,{size:1,children:"Toggle navigator"}),fallbackPlacements:["bottom-start"],padding:2,placement:"bottom",portal:!0,children:m.jsx(xe,{"aria-label":"Toggle navigator",fontSize:1,icon:ea,mode:"bleed",onClick:g,padding:3,selected:o})}),m.jsx(tt,{animate:!0,content:m.jsxs(J,{align:"center",style:{whiteSpace:"nowrap"},children:[m.jsx(be,{padding:1,children:m.jsx(q,{size:1,children:w?"Disable edit overlay":"Enable edit overlay"})}),m.jsx(be,{paddingY:1,children:m.jsx(ta,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})})]}),fallbackPlacements:["bottom-start"],padding:1,placement:"bottom",portal:!0,children:m.jsx(Ce,{as:"label",flex:"none",padding:3,style:{lineHeight:0,borderRadius:999,userSelect:"none"},tone:w?"positive":void 0,children:m.jsxs(J,{align:"center",gap:2,children:[m.jsx("div",{style:{margin:-2},children:m.jsx(wh,{checked:w,onChange:y,disabled:i.status==="loading"||d!=="connected"})}),m.jsx(be,{children:m.jsx(q,{muted:!0,size:1,weight:"medium",children:"Edit"})})]})})}),m.jsx(tt,{animate:!0,content:m.jsx(q,{size:1,children:i.status==="loading"?"Loading":i.status==="reloading"||i.status==="refreshing"?"Refreshing":"Refresh preview"}),fallbackPlacements:["bottom-start"],padding:2,placement:"bottom",portal:!0,children:m.jsx(xe,{"aria-label":"Refresh preview",fontSize:1,icon:na,mode:"bleed",loading:i.status==="reloading"||i.status==="refreshing",onClick:_,padding:3})}),m.jsx(be,{flex:1,children:m.jsx(vh,{onChange:a,origin:W,value:k})}),m.jsx(J,{align:"center",flex:"none",gap:1,children:m.jsx(Ei,{button:m.jsx(xe,{fontSize:1,iconRight:ia,mode:"bleed",padding:3,space:2}),id:"location-menu",menu:m.jsx(ki,{children:m.jsx(xh,{initialUrl:s,openPopup:l,previewLocationOrigin:W,previewLocationRoute:k})}),popover:{animate:!0,constrainSize:!0,placement:"bottom",portal:!0}})}),m.jsx(J,{align:"center",flex:"none",gap:1,children:m.jsx(Ei,{button:m.jsx(xe,{fontSize:1,iconRight:sa,mode:"bleed",padding:3,space:2,text:wn[r==="connected"?f:"previewDrafts"],loading:r==="reconnecting"&&i.status!=="loaded",disabled:r!=="connected"}),id:"perspective-menu",menu:m.jsxs(ki,{style:{maxWidth:240},children:[m.jsx(Rt,{fontSize:1,onClick:()=>n({type:Kn,perspective:"previewDrafts"}),padding:3,pressed:f==="previewDrafts",tone:Ph,children:m.jsxs(J,{align:"flex-start",gap:3,children:[m.jsx(be,{flex:"none",children:m.jsx(q,{size:1,children:p.createElement(nr.previewDrafts)})}),m.jsxs(Ie,{flex:1,space:2,children:[m.jsx(q,{size:1,weight:"medium",children:wn.previewDrafts}),m.jsx(q,{muted:!0,size:1,children:"View this page with latest draft content"})]}),m.jsx(be,{flex:"none",children:m.jsx(q,{muted:!0,size:1,style:{opacity:f==="previewDrafts"?1:0},children:m.jsx(Ri,{})})})]})}),m.jsx(Rt,{fontSize:1,onClick:()=>n({type:Kn,perspective:"published"}),padding:3,pressed:f==="published",tone:Th,children:m.jsxs(J,{align:"flex-start",gap:3,children:[m.jsx(be,{flex:"none",children:m.jsx(q,{size:1,children:p.createElement(nr.published)})}),m.jsxs(Ie,{flex:1,space:2,children:[m.jsx(q,{size:1,weight:"medium",children:wn.published}),m.jsx(q,{muted:!0,size:1,children:"View this page with published content"})]}),m.jsx(be,{flex:"none",children:m.jsx(q,{muted:!0,size:1,style:{opacity:f==="published"?1:0},children:m.jsx(Ri,{})})})]})})]}),popover:{animate:!0,constrainSize:!0,placement:"bottom",portal:!0}})}),m.jsxs(J,{align:"center",flex:"none",gap:1,children:[m.jsx(tt,{animate:!0,content:m.jsx(q,{size:1,children:"Full viewport"}),fallbackPlacements:["bottom-start"],padding:2,placement:"bottom",portal:!0,children:m.jsx(xe,{"aria-label":"Full viewport",fontSize:1,icon:ra,mode:"bleed",onClick:P,padding:3,selected:x==="desktop"})}),m.jsx(tt,{animate:!0,content:m.jsx(q,{size:1,children:"Narrow viewport"}),padding:2,placement:"bottom",portal:!0,children:m.jsx(xe,{"aria-label":"Narrow viewport",fontSize:1,icon:oa,mode:"bleed",onClick:T,padding:3,selected:x==="mobile"})})]})]})}),m.jsx(Ce,{flex:1,tone:"transparent",children:m.jsxs(J,{align:"center",height:"fill",justify:"center",padding:x==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:K?"wait":void 0},children:[m.jsx(Pf,{children:D||S||A||!ne||F?(S||d==="connecting"&&i.status!=="refreshing")&&!F?m.jsx(bn,{initial:"initial",animate:"animate",exit:"exit",variants:ir,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:m.jsxs(J,{style:{...Wt[x]},justify:"center",align:"center",direction:"column",gap:4,children:[m.jsx(Di,{muted:!0}),m.jsx(q,{muted:!0,size:1,children:"Loading"})]})}):D&&!F?m.jsx(bn,{initial:"initial",animate:"animate",exit:"exit",variants:Ch,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute",borderTop:"1px solid transparent",boxShadow:"0 0 0 1px var(--card-border-color)"},children:m.jsx(Ti,{flex:1,message:"Could not connect to the preview",onRetry:B,onContinueAnyway:O,children:v&&m.jsxs(m.Fragment,{children:[d!=="connected"&&m.jsx(Ce,{padding:3,radius:2,tone:"critical",children:m.jsxs(Ie,{space:3,children:[m.jsx(Dt,{muted:!0,size:0,children:"Overlay connection status"}),m.jsx(Mt,{size:1,children:d})]})}),r!=="connected"&&m.jsx(Ce,{padding:3,radius:2,tone:"critical",children:m.jsxs(Ie,{space:3,children:[m.jsx(Dt,{muted:!0,size:0,children:"Loader connection status"}),m.jsx(Mt,{size:1,children:r})]})})]})})}):null:m.jsx(bn,{initial:"initial",animate:"animate",exit:"exit",variants:ir,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:V?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:V?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:m.jsxs(J,{style:{...Wt[x]},justify:"center",align:"center",direction:"column",gap:4,children:[V&&m.jsx(xe,{disabled:!0,fontSize:1,mode:"ghost",text:"Continue anyway",style:{opacity:0}}),m.jsx(Ce,{radius:2,tone:V?"caution":"inherit",padding:4,shadow:1,children:m.jsxs(J,{justify:"center",align:"center",direction:"column",gap:4,children:[m.jsx(Di,{muted:!0}),m.jsx(q,{muted:!0,size:1,children:V?m.jsx(m.Fragment,{children:"Unable to connect, check the browser console for more information."}):"Connecting"})]})}),V&&m.jsx(xe,{fontSize:1,tone:"critical",onClick:O,text:"Continue anyway"})]})})}),m.jsx(yh,{ref:t,style:{pointerEvents:(S||d==="connecting"&&i.status!=="refreshing")&&!F?"none":"auto",boxShadow:"0 0 0 1px var(--card-border-color)",borderTop:"1px solid transparent"},src:s.toString(),initial:["background"],variants:Ah,animate:[(S||d==="connecting"&&i.status!=="refreshing")&&!F?"background":"active",S?"reloading":"idle",x,ne&&!F?"timedOut":""],onLoad:ie})]})})]})})}),Wt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},ir={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Ch={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Ah={desktop:{...Wt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...Wt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};let sr=!1;function jh(e){var t;if(e===void 0)return;const n=(t=decodeURIComponent(e))==null?void 0:t.split(".");return n[0]==="drafts"&&n.shift(),n.join(".")}function Vh(e){if(e!==void 0)return yr.toString(function(t){const n=[];for(const i of t.split(".")){const s=Ff.exec(i);if(s){n.push(s[1],Number(s[2]));continue}const r=Bf.exec(i);if(r){n.push(r[1],[Number(r[2]),Number(r[3])]);continue}const o=$f.exec(i);o?n.push(o[1],{_key:o[2]}):n.push(i)}return n}(decodeURIComponent(e)))}function Pn(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0&&t!==""&&t!==null))}function Eh({initialPreviewUrl:e,routerNavigate:t,routerState:n,routerSearchParams:i,frameStateRef:s}){const r=p.useMemo(()=>{const{id:c,path:l,type:d}={id:jh((u=n).id),path:Vh(u.path),type:u.type};var u;return{id:c,type:d,path:l,preview:i.preview||`${e.pathname}${e.search}`,perspective:i.perspective,viewport:i.viewport,inspect:i.inspect,rev:i.rev,since:i.since,template:i.template,templateParams:i.templateParams,view:i.view,pathKey:i.pathKey,instruction:i.instruction,comment:i.comment}},[n,i,e]),o=p.useMemo(()=>Pn({inspect:r.inspect,path:r.path,rev:r.rev,since:r.since,template:r.template,templateParams:r.templateParams,view:r.view,pathKey:r.pathKey,instruction:r.instruction,comment:r.comment}),[r.comment,r.inspect,r.instruction,r.path,r.pathKey,r.rev,r.since,r.template,r.templateParams,r.view]),a=p.useRef(n);return p.useEffect(()=>{a.current=n},[n]),{deskParams:o,navigate:p.useMemo(()=>_o((c,l={},d)=>{c.id&&(c.id=pr(c.id));const{_searchParams:u,...f}=a.current,h=(u||[]).reduce((w,[v,b])=>(w[v]=b,w),{}),g=Pn({...f,...c}),y=Pn({...h,...l});f.id!==g.id&&(delete y.template,delete y.templateParams),g._searchParams=Object.entries(y).reduce((w,[v,b])=>[...w,[v,b]],[]);const x=d??y.preview===s.current.url;t(g,{replace:x})},50),[t,s]),params:r}}function kh(e,t,n){var i,s;const r=Tn({apiVersion:Sn}),o=dr(),a=((i=o==null?void 0:o.activeWorkspace)==null?void 0:i.basePath)||"/",c=((s=o==null?void 0:o.activeWorkspace)==null?void 0:s.name)||"default",l=function(u,f,h){const g=Cn();return p.useMemo(()=>["@sanity/presentation",f,h,u,g==null?void 0:g.id,Rh],[f,g==null?void 0:g.id,u,h])}(t,a,c),d=function(u,f){const h=Tn({apiVersion:Sn}),g=Cn(),[y,x]=p.useState(""),w=u?Ws(async()=>await Bo(h,"@sanity/presentation",typeof window>"u"?"":location.href,g==null?void 0:g.id),[...f,y]):null;return p.useEffect(()=>{if(!w)return;const v=setTimeout(()=>{p.startTransition(()=>x(w.expiresAt.toString()))},w.expiresAt.getTime()-Date.now());return()=>clearTimeout(v)},[w]),(w==null?void 0:w.secret)||null}(typeof e=="object"||typeof e=="function",l);return Ws(async()=>{if(typeof e=="string"){const f=new URL(e,location.origin);let h=f;try{if(n){const g=new URL(n,f);g.origin===f.origin&&(h=g)}else if(document.referrer){const g=new URL(document.referrer);g.origin===f.origin&&(h=g)}}catch{}return location.origin!==h.origin||!h.pathname.startsWith(`${a}/`)&&h.pathname!==a?h:f}const u=await(typeof e=="object"?Sf(e):e)({client:r,previewUrlSecret:d,previewSearchParam:n,referrer:typeof document>"u"?null:document.referrer,studioBasePath:a});return new URL(u,location.origin)},[...l,d])}const Rh=Symbol(),Dh=p.lazy(()=>or(()=>import("./LoaderQueries-aa938bdb.js"),["static/LoaderQueries-aa938bdb.js","static/sanity-64968bd9.js","static/DisplayedDocumentBroadcaster-3be794b6.js"])),Mh=p.lazy(()=>or(()=>import("./PostMessageRefreshMutations-57e0de8b.js"),["static/PostMessageRefreshMutations-57e0de8b.js","static/sanity-64968bd9.js"])),Lh=ye(J)`
  overflow-x: auto;
`;function Ih(e){var t;const{previewUrl:n,components:i}=(t=e.tool.options)!=null?t:{},s=e.tool.name||aa,{unstable_navigator:r}=i||{},{navigate:o,state:a}=ar(),c=cr(Object.fromEntries(a._searchParams||[])),l=kh(n||"/",s,c.preview||null),[d]=p.useState(()=>{var R;const M=(R=e.tool.options)==null?void 0:R.devMode;return typeof M=="function"?M():typeof M=="boolean"?M:typeof window<"u"&&window.location.hostname==="localhost"}),u=p.useMemo(()=>l.origin,[l.origin]),f=p.useRef(null),[h,g]=p.useState(),[y,x]=p.useState({}),w=p.useRef({title:void 0,url:void 0}),{params:v,deskParams:b,navigate:P}=Eh({initialPreviewUrl:l,routerNavigate:o,routerState:a,routerSearchParams:c,frameStateRef:w}),[T,S]=p.useReducer(dh,{perspective:v.perspective,viewport:v.viewport},gh),[V,C]=function(R,M){if(R!=="published"&&R!=="previewDrafts")throw new Error(`Invalid perspective: ${R}`);const[H,L]=p.useState({}),[E,pe]=p.useState({}),ue=p.useRef(""),Re=p.useCallback((de,Y,De=[])=>{const Se=De.filter(ee=>"_projectId"in ee&&ee._projectId?(sr||(console.warn("Cross dataset references are not supported yet, ignoring source document",ee),sr=!0),!1):ee);(Y==="published"?L:pe)(ee=>{const et={};for(const vt of Se)et[vt._id]=vt;if(ue.current!==M.current.url)return ue.current=M.current.url,{[de]:et};const yt=ee[de];return Da(yt,et)?ee:{...ee,[de]:et}})},[M]);return[p.useMemo(()=>{const de=Object.values(R==="published"?H:E).reduce((Y,De)=>(Object.values(De).forEach(Se=>{Y[Se._id]=Se}),Y),{});return Object.values(de)},[R,E,H]),Re]}(T.perspective,w),A=ca(),D=la();p.useEffect(()=>{(T.perspective!==v.perspective||T.viewport!==v.viewport)&&P({},{perspective:T.perspective==="previewDrafts"?void 0:T.perspective,viewport:T.viewport==="desktop"?void 0:T.viewport})},[v.perspective,T.perspective,P,T.viewport,v.viewport]);const[I,K]=p.useState("connecting"),[W,_]=p.useState("connecting"),[B,O]=p.useState("connecting"),[F]=p.useState(()=>new Set),se=p.useCallback(R=>{const M=window.open(R,"_blank");M&&F.add(M)},[F]);p.useEffect(()=>{if(F.size&&h)for(const R of F)R&&"closed"in R&&!R.closed&&h.addSource(R)},[h,F,F.size]),p.useEffect(()=>{var R;const M=(R=f.current)==null?void 0:R.contentWindow;if(!M)return;const H=function(L){const{destroy:E,send:pe}=Hs(L),ue=new Set,Re=new WeakMap,de=new Set;return{destroy:()=>{E();for(const Y of de)Y()},send:(Y,De,Se)=>{pe(Y,De,Se);for(const ee of ue)ee&&"closed"in ee&&!ee.closed&&Re.has(ee)&&Re.get(ee)(Y,De,Se)},addSource(Y){if(ue.has(Y))return;if(!("closed"in Y))throw console.warn("Source is unsupported",{source:Y}),new Error("Source is unsupported");if(Y.closed)throw new Error("Source is closed");const{send:De,destroy:Se}=Hs({...L,target:Y,connectTo:L.connectTo.map(ee=>{const{onStatusUpdate:et,onEvent:yt,...vt}=ee;return{...vt,onEvent:yt?(xt,Yo)=>{if(xt!=="preview-kit/documents"&&xt!=="overlay/navigate"&&xt!=="loader/documents")return yt(xt,Yo)}:void 0}})});de.add(Se),Re.set(Y,De),ue.add(Y)}}}({id:"presentation",target:M,targetOrigin:u,connectTo:[{id:"overlays",heartbeat:!0,onStatusUpdate:K,onEvent(L,E){if(L!=="visual-editing/focus"&&L!=="overlay/focus"||!("id"in E))if(L==="visual-editing/navigate"||L==="overlay/navigate"){const{title:pe,url:ue}=E;w.current.url!==ue&&P({},{preview:ue}),w.current={title:pe,url:ue}}else L==="visual-editing/meta"?w.current.title=E.title:L==="visual-editing/toggle"||L==="overlay/toggle"?S({type:Go,enabled:E.enabled}):L==="visual-editing/documents"?C("visual-editing",E.perspective,E.documents):L==="visual-editing/refreshing"&&E.source==="manual"?clearTimeout(G.current):L==="visual-editing/refreshing"&&E.source==="mutation"?S({type:Nn}):L==="visual-editing/refreshed"&&S({type:Ai});else P({type:E.type,id:E.id,path:E.path})}},{id:"loaders",heartbeat:!0,onStatusUpdate:_,onEvent(L,E){if(L==="loader/documents"&&E.projectId===A&&E.dataset===D)C("loaders",E.perspective,E.documents);else if(L==="loader/query-listen"&&E.projectId===A&&E.dataset===D){if(typeof E.heartbeat=="number"&&E.heartbeat<rn)throw new Error(`Loader query listen heartbeat interval must be at least ${rn}ms`);x(pe=>{var ue,Re,de;return{...pe,[(Re=E.query,de=E.params,`${Re}-${typeof de=="string"?de:JSON.stringify(de)}`)]:{perspective:E.perspective,query:E.query,params:E.params,receivedAt:Date.now(),heartbeat:(ue=E.heartbeat)!=null&&ue}}})}}},{id:"preview-kit",heartbeat:!0,onStatusUpdate:O,onEvent(L,E){L==="preview-kit/documents"&&E.projectId===A&&E.dataset===D&&C("preview-kit",E.perspective,E.documents)}}]});return g(H),()=>{H.destroy(),g(void 0)}},[D,A,C,P,u]),p.useEffect(()=>{const R=setInterval(()=>p.startTransition(()=>x(M=>{if(Object.keys(M).length<1)return M;const H=Date.now();if(!Object.values(M).some(E=>E.heartbeat!==!1&&H>E.receivedAt+E.heartbeat))return M;const L={};for(const[E,pe]of Object.entries(M))pe.heartbeat!==!1&&H>pe.receivedAt+pe.heartbeat||(L[E]=pe);return L})),rn);return()=>clearInterval(R)},[]);const ne=p.useCallback(R=>{P({path:yr.toString(R)},{},!0)},[P]),Pe=p.useCallback(R=>{const M=new URL(R,l.origin),H=M.pathname+M.search;M.origin===l.origin&&H!==v.preview&&P({},{preview:H})},[l,v,P]),k=p.useCallback(R=>{P({},R)},[P]);p.useEffect(()=>{h==null||h.send("overlays","presentation/perspective",{perspective:T.perspective})},[h,T.perspective]),p.useEffect(()=>{v.id&&v.path?h==null||h.send("overlays","presentation/focus",{id:v.id,path:v.path}):h==null||h.send("overlays","presentation/blur",void 0)},[h,v.id,v.path]),p.useEffect(()=>{w.current.url&&v.preview&&w.current.url!==v.preview&&(w.current.url=v.preview,I!=="connected"&&f.current?f.current.src=`${u}${v.preview}`:h==null||h.send("overlays","presentation/navigate",{url:v.preview,type:"replace"}))},[h,I,u,v.preview]);const ie=p.useCallback(()=>h==null?void 0:h.send("overlays","presentation/toggleOverlay",void 0),[h]),[re,ce]=p.useState(null);p.useEffect(()=>{const R=H=>{Xs(H)&&ie()},M=H=>{var L;Xs(H)&&ie(),L=H,["mod","\\"].every(E=>qs[E]?L[qs[E]]:L.key===E.toUpperCase())&&ie()};return window.addEventListener("keydown",M),window.addEventListener("keyup",R),()=>{window.removeEventListener("keydown",M),window.removeEventListener("keyup",R)}},[ie]);const[ve,le]=p.useState(null),[{navigatorEnabled:Te,toggleNavigator:he},oe]=rh({unstable_navigator:r}),X=p.useRef(v.id);p.useEffect(()=>{v.rev&&X.current&&v.id!==X.current&&P({},{rev:void 0}),X.current=v.id});const G=p.useRef(),gt=p.useCallback(R=>{if(S({type:Nn}),h)return G.current=window.setTimeout(R,300),void h.send("overlays","presentation/refresh",{source:"manual",livePreviewEnabled:B==="connected"||W==="connected"});R()},[h,W,B]),ji=ua(),Xo=p.useCallback(({id:R,type:M,path:H})=>{if(w.current.url)return{title:w.current.title||w.current.url,name:"edit",params:{id:R,path:H,type:M,inspect:da,workspace:ji.name,mode:fa,preview:v.preview}}},[v.preview,ji.name]);return m.jsxs(m.Fragment,{children:[m.jsx(ch,{deskParams:b,devMode:d,name:s,params:v,navigate:P,children:m.jsx(sh,{navigate:P,children:m.jsx(ah,{params:v,children:m.jsx(Lh,{height:"fill",children:m.jsxs(ih,{children:[m.jsx(oe,{}),m.jsx($n,{id:"preview",minWidth:325,defaultSize:Te?50:75,order:3,children:m.jsx(J,{direction:"column",flex:1,height:"fill",ref:le,children:m.jsx(ha,{element:ve,children:m.jsx(Sh,{dispatch:S,iframe:T.iframe,initialUrl:l,loadersConnection:W,navigatorEnabled:Te,onPathChange:Pe,onRefresh:gt,openPopup:se,overlaysConnection:I,params:v,perspective:T.perspective,ref:f,targetOrigin:u,toggleNavigator:he,toggleOverlay:ie,viewport:T.viewport,visualEditing:T.visualEditing})})})}),m.jsx(Uo,{order:4}),m.jsx($n,{id:"content",minWidth:325,order:5,children:m.jsx(Ma,{documentId:v.id,setDisplayedDocument:ce,children:m.jsx(pa,{getIntent:Xo,children:m.jsx(Yf,{refs:V,deskParams:b,documentId:v.id,documentType:v.type,onDeskParams:k,onFocusPath:ne,previewUrl:v.preview})})})})]})})})})}),h&&m.jsx(p.Suspense,{children:m.jsx(Dh,{channel:h,liveQueries:y,perspective:T.perspective,liveDocument:re,documentsOnPage:V})}),h&&v.id&&v.type&&m.jsx(p.Suspense,{children:m.jsx(Mh,{channel:h,id:v.id,type:v.type,loadersConnection:W,previewKitConnection:B})})]})}const Nh=Object.freeze(Object.defineProperty({__proto__:null,default:Ih},Symbol.toStringTag,{value:"Module"}));export{Mi as D,Nh as P,Oa as a,Bh as g,$h as p,Uh as r,Fa as t,on as w};
