import{t as pt,r as c,ax as dt,ay as ft,j as O,az as Q}from"./sanity-64968bd9.js";import{w as yt,r as mt,p as vt,t as wt,D as U,g as T,a as gt}from"./PresentationTool-3f5b8a60.js";import"./DisplayedDocumentBroadcaster-3be794b6.js";const St=r=>r;function At(r,t,e,n=St,i="raw"){if(!t)return r;if(i!=="published"&&i!=="raw"&&i!=="previewDrafts")throw new Error(`Unknown perspective "${i}"`);return yt(JSON.parse(JSON.stringify(r)),(s,a)=>{const l=mt(a,t);if(!l)return s;const{mapping:o,pathSuffix:u}=l;if(o.type!=="value"||o.source.type!=="documentValue")return s;const h=t.documents[o.source.document],d=t.paths[o.source.path];if(h){const y=vt(d+u),v=wt(y);if(v==="_id")return s;let p;if(i==="previewDrafts"?(p=e(h._id.startsWith(U)?h:{...h,_id:`${U}${h._id}}`}),p||(p=e(h._id.startsWith(U)?{...h,_id:T(h._id)}:h)),p&&(p={...p,_id:T(h._id),_originalId:h._id})):p=e(h),!p)return s;const m=p?gt(p,v,s):s;return s===m?s:n(m,{cachedDocument:p,previousValue:s,sourceDocument:h,sourcePath:y})}return s})}const bt=["Value","Copy","Blank","ReturnIntoArray","ReturnIntoObject","ReturnIntoObjectSameKey","PushField","PushElement","PushParent","Pop","PushFieldCopy","PushFieldBlank","PushElementCopy","PushElementBlank","ReturnIntoObjectPop","ReturnIntoObjectSameKeyPop","ReturnIntoArrayPop","ObjectSetFieldValue","ObjectCopyField","ObjectDeleteField","ArrayAppendValue","ArrayAppendSlice","StringAppendString","StringAppendSlice"];class Et{constructor(t,e,n){this.model=t,this.root=e,this.patch=n,this.i=0,this.inputStack=[],this.outputStack=[]}read(){return this.patch[this.i++]}process(){for(this.inputStack.push({value:this.root}),this.outputStack.push({value:this.root});this.i<this.patch.length;){let e=this.read(),n=bt[e];if(!n)throw new Error(`Unknown opcode: ${e}`);let i=`process${n}`;this[i].apply(this)}let t=this.outputStack.pop();return this.finalizeOutput(t)}inputEntry(){return this.inputStack[this.inputStack.length-1]}inputKey(t,e){return t.keys||(t.keys=this.model.objectGetKeys(t.value).sort()),t.keys[e]}outputEntry(){return this.outputStack[this.outputStack.length-1]}outputArray(){let t=this.outputEntry();return t.writeValue||(t.writeValue=this.model.copyArray(t.value)),t.writeValue}outputObject(){let t=this.outputEntry();return t.writeValue||(t.writeValue=this.model.copyObject(t.value)),t.writeValue}outputString(){let t=this.outputEntry();return t.writeValue||(t.writeValue=this.model.copyString(t.value)),t.writeValue}finalizeOutput(t){return t.writeValue?this.model.finalize(t.writeValue):t.value}processValue(){let t=this.model.wrap(this.read());this.outputStack.push({value:t})}processCopy(){let t=this.inputEntry();this.outputStack.push({value:t.value})}processBlank(){this.outputStack.push({value:null})}processReturnIntoArray(){let t=this.outputStack.pop(),e=this.finalizeOutput(t),n=this.outputArray();this.model.arrayAppendValue(n,e)}processReturnIntoObject(){let t=this.read(),e=this.outputStack.pop(),n=this.finalizeOutput(e);n=this.model.markChanged(n);let i=this.outputObject();this.model.objectSetField(i,t,n)}processReturnIntoObjectSameKey(){let t=this.inputEntry(),e=this.outputStack.pop(),n=this.finalizeOutput(e),i=this.outputObject();this.model.objectSetField(i,t.key,n)}processPushField(){let t=this.read(),e=this.inputEntry(),n=this.inputKey(e,t),i=this.model.objectGetField(e.value,n);this.inputStack.push({value:i,key:n})}processPushElement(){let t=this.read(),e=this.inputEntry(),n=this.model.arrayGetElement(e.value,t);this.inputStack.push({value:n})}processPop(){this.inputStack.pop()}processPushFieldCopy(){this.processPushField(),this.processCopy()}processPushFieldBlank(){this.processPushField(),this.processBlank()}processPushElementCopy(){this.processPushElement(),this.processCopy()}processPushElementBlank(){this.processPushElement(),this.processBlank()}processReturnIntoObjectPop(){this.processReturnIntoObject(),this.processPop()}processReturnIntoObjectSameKeyPop(){this.processReturnIntoObjectSameKey(),this.processPop()}processReturnIntoArrayPop(){this.processReturnIntoArray(),this.processPop()}processObjectSetFieldValue(){this.processValue(),this.processReturnIntoObject()}processObjectCopyField(){this.processPushField(),this.processCopy(),this.processReturnIntoObjectSameKey(),this.processPop()}processObjectDeleteField(){let t=this.read(),e=this.inputEntry(),n=this.inputKey(e,t),i=this.outputObject();this.model.objectDeleteField(i,n)}processArrayAppendValue(){let t=this.model.wrap(this.read()),e=this.outputArray();this.model.arrayAppendValue(e,t)}processArrayAppendSlice(){let t=this.read(),e=this.read(),n=this.outputArray(),i=this.inputEntry().value;this.model.arrayAppendSlice(n,i,t,e)}processStringAppendString(){let t=this.model.wrap(this.read()),e=this.outputString();this.model.stringAppendValue(e,t)}processStringAppendSlice(){let t=this.read(),e=this.read(),n=this.outputString(),i=this.inputEntry().value;this.model.stringAppendSlice(n,i,t,e)}}function It(r){return r>>16?4:r>>11?3:r>>7?2:1}function Z(r,t,e=0){let n=e,i=0;for(i=e;n<t;i++){let s=r.codePointAt(i),a=It(s);a===4&&i++,n+=a}return i}class Pt{wrap(t){return t}finalize(t){return Array.isArray(t)?t:t.data}markChanged(t){return t}objectGetKeys(t){return Object.keys(t)}objectGetField(t,e){return t[e]}arrayGetElement(t,e){return t[e]}copyObject(t){let e={type:"object",data:{}};if(t!==null)for(let[n,i]of Object.entries(t))e.data[n]=i;return e}copyArray(t){return t===null?[]:t.slice()}copyString(t){return{type:"string",data:t===null?"":t}}objectSetField(t,e,n){t.data[e]=n}objectDeleteField(t,e){delete t.data[e]}arrayAppendValue(t,e){t.push(e)}arrayAppendSlice(t,e,n,i){t.push(...e.slice(n,i))}stringAppendSlice(t,e,n,i){const s=e,a=Z(s,n),l=Z(s,i,a);t.data+=s.slice(a,l)}stringAppendValue(t,e){t.data+=e}}function jt(r,t){let e=r;return new Et(new Pt,e,t).process()}function A(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(A.prototype[Symbol.iterator]=function(){return this});A.of=function(){var r=arguments,t=r.length,e=0;return new A(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};A.empty=function(){var r=new A(function(){return{done:!0}});return r};A.fromSequence=function(r){var t=0,e=r.length;return new A(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};A.is=function(r){return r instanceof A?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};var Ot=A,D={};D.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";D.SYMBOL_SUPPORT=typeof Symbol<"u";var rt=D,kt=rt.ARRAY_BUFFER_SUPPORT,Rt=rt.SYMBOL_SUPPORT,x=function(t,e){var n,i,s,a,l;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||kt&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(s=0,a=t.length;s<a;s++)e(t[s],s);return}if(typeof t.forEach=="function"){t.forEach(e);return}if(Rt&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(n=t,s=0;l=n.next(),l.done!==!0;)e(l.value,s),s++;return}for(i in t)t.hasOwnProperty(i)&&e(t[i],i)},C={};(function(r){var t=Math.pow(2,8)-1,e=Math.pow(2,16)-1,n=Math.pow(2,32)-1,i=Math.pow(2,7)-1,s=Math.pow(2,15)-1,a=Math.pow(2,31)-1;r.getPointerArray=function(o){var u=o-1;if(u<=t)return Uint8Array;if(u<=e)return Uint16Array;if(u<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},r.getSignedPointerArray=function(o){var u=o-1;return u<=i?Int8Array:u<=s?Int16Array:u<=a?Int32Array:Float64Array},r.getNumberType=function(o){return o===(o|0)?Math.sign(o)===-1?o<=127&&o>=-128?Int8Array:o<=32767&&o>=-32768?Int16Array:Int32Array:o<=255?Uint8Array:o<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};r.getMinimalRepresentation=function(o,u){var h=null,d=0,y,v,p,m,w;for(m=0,w=o.length;m<w;m++)p=u?u(o[m]):o[m],v=r.getNumberType(p),y=l[v.name],y>d&&(d=y,h=v);return h},r.isTypedArray=function(o){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(o)},r.concat=function(){var o=0,u,h,d;for(u=0,d=arguments.length;u<d;u++)o+=arguments[u].length;var y=new arguments[0].constructor(o);for(u=0,h=0;u<d;u++)y.set(arguments[u],h),h+=arguments[u].length;return y},r.indices=function(o){for(var u=r.getPointerArray(o),h=new u(o),d=0;d<o;d++)h[d]=d;return h}})(C);var z={},it=x,nt=C;function Vt(r){return Array.isArray(r)||nt.isTypedArray(r)}function B(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function zt(r){var t=B(r),e=typeof t=="number"?new Array(t):[],n=0;return it(r,function(i){e[n++]=i}),e}function _t(r){var t=B(r),e=typeof t=="number"?nt.getPointerArray(t):Array,n=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new e(t):[],s=0;return it(r,function(a){n[s]=a,i[s]=s++}),[n,i]}z.isArrayLike=Vt;z.guessLength=B;z.toArray=zt;z.toArrayWithIndices=_t;var K=Ot,Ft=x,Mt=C,Tt=z;function f(r,t,e){if(arguments.length<2&&(e=r,r=null,t=null),this.capacity=e,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=Mt.getPointerArray(e);this.forward=new n(e),this.backward=new n(e),this.K=typeof r=="function"?new r(e):new Array(e),this.V=typeof t=="function"?new t(e):new Array(e),this.size=0,this.head=0,this.tail=0,this.items={}}f.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};f.prototype.splayOnTop=function(r){var t=this.head;if(this.head===r)return this;var e=this.backward[r],n=this.forward[r];return this.tail===r?this.tail=e:this.backward[n]=e,this.forward[e]=n,this.backward[t]=r,this.head=r,this.forward[r]=t,this};f.prototype.set=function(r,t){var e=this.items[r];if(typeof e<"u"){this.splayOnTop(e),this.V[e]=t;return}this.size<this.capacity?e=this.size++:(e=this.tail,this.tail=this.backward[e],delete this.items[this.K[e]]),this.items[r]=e,this.K[e]=r,this.V[e]=t,this.forward[e]=this.head,this.backward[this.head]=e,this.head=e};f.prototype.setpop=function(r,t){var e=null,n=null,i=this.items[r];return typeof i<"u"?(this.splayOnTop(i),e=this.V[i],this.V[i]=t,{evicted:!1,key:r,value:e}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],e=this.V[i],n=this.K[i],delete this.items[n]),this.items[r]=i,this.K[i]=r,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:e}:null)};f.prototype.has=function(r){return r in this.items};f.prototype.get=function(r){var t=this.items[r];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};f.prototype.peek=function(r){var t=this.items[r];if(!(typeof t>"u"))return this.V[t]};f.prototype.forEach=function(r,t){t=arguments.length>1?t:this;for(var e=0,n=this.size,i=this.head,s=this.K,a=this.V,l=this.forward;e<n;)r.call(t,a[i],s[i],this),i=l[i],e++};f.prototype.keys=function(){var r=0,t=this.size,e=this.head,n=this.K,i=this.forward;return new K(function(){if(r>=t)return{done:!0};var s=n[e];return r++,r<t&&(e=i[e]),{done:!1,value:s}})};f.prototype.values=function(){var r=0,t=this.size,e=this.head,n=this.V,i=this.forward;return new K(function(){if(r>=t)return{done:!0};var s=n[e];return r++,r<t&&(e=i[e]),{done:!1,value:s}})};f.prototype.entries=function(){var r=0,t=this.size,e=this.head,n=this.K,i=this.V,s=this.forward;return new K(function(){if(r>=t)return{done:!0};var a=n[e],l=i[e];return r++,r<t&&(e=s[e]),{done:!1,value:[a,l]}})};typeof Symbol<"u"&&(f.prototype[Symbol.iterator]=f.prototype.entries);f.prototype.inspect=function(){for(var r=new Map,t=this.entries(),e;e=t.next(),!e.done;)r.set(e.value[0],e.value[1]);return Object.defineProperty(r,"constructor",{value:f,enumerable:!1}),r};typeof Symbol<"u"&&(f.prototype[Symbol.for("nodejs.util.inspect.custom")]=f.prototype.inspect);f.from=function(r,t,e,n){if(arguments.length<2){if(n=Tt.guessLength(r),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,e=null);var i=new f(t,e,n);return Ft(r,function(s,a){i.set(a,s)}),i};var Ct=f,V=Ct,Lt=x,Ut=C,Dt=z;function b(r,t,e){arguments.length<2?V.call(this,r):V.call(this,r,t,e);var n=Ut.getPointerArray(this.capacity);this.deleted=new n(this.capacity),this.deletedSize=0}for(var tt in V.prototype)b.prototype[tt]=V.prototype[tt];typeof Symbol<"u"&&(b.prototype[Symbol.iterator]=V.prototype[Symbol.iterator]);b.prototype.clear=function(){V.prototype.clear.call(this),this.deletedSize=0};b.prototype.set=function(r,t){var e=this.items[r];if(typeof e<"u"){this.splayOnTop(e),this.V[e]=t;return}this.size<this.capacity?(this.deletedSize>0?e=this.deleted[--this.deletedSize]:e=this.size,this.size++):(e=this.tail,this.tail=this.backward[e],delete this.items[this.K[e]]),this.items[r]=e,this.K[e]=r,this.V[e]=t,this.forward[e]=this.head,this.backward[this.head]=e,this.head=e};b.prototype.setpop=function(r,t){var e=null,n=null,i=this.items[r];return typeof i<"u"?(this.splayOnTop(i),e=this.V[i],this.V[i]=t,{evicted:!1,key:r,value:e}):(this.size<this.capacity?(this.deletedSize>0?i=this.deleted[--this.deletedSize]:i=this.size,this.size++):(i=this.tail,this.tail=this.backward[i],e=this.V[i],n=this.K[i],delete this.items[n]),this.items[r]=i,this.K[i]=r,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:e}:null)};b.prototype.delete=function(r){var t=this.items[r];if(typeof t>"u")return!1;if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var e=this.backward[t],n=this.forward[t];return this.head===t&&(this.head=n),this.tail===t&&(this.tail=e),this.forward[e]=n,this.backward[n]=e,this.size--,this.deleted[this.deletedSize++]=t,!0};b.prototype.remove=function(r,t=void 0){var e=this.items[r];if(typeof e>"u")return t;var n=this.V[e];if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,n;var i=this.backward[e],s=this.forward[e];return this.head===e&&(this.head=s),this.tail===e&&(this.tail=i),this.forward[i]=s,this.backward[s]=i,this.size--,this.deleted[this.deletedSize++]=e,n};b.from=function(r,t,e,n){if(arguments.length<2){if(n=Dt.guessLength(r),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,e=null);var i=new b(t,e,n);return Lt(r,function(s,a){i.set(a,s)}),i};var xt=b;const Bt=pt(xt);function Kt(r){return document.addEventListener("visibilitychange",r),()=>document.removeEventListener("visibilitychange",r)}function Wt(r){const{liveDocument:t,channel:e,perspective:n,liveQueries:i,documentsOnPage:s}=r,[a]=c.useState(()=>new Bt(dt)),l=ft({apiVersion:"2023-10-16"}),o=c.useMemo(()=>l.config(),[l]),u=c.useMemo(()=>l.withConfig({resultSourceMap:"withKeyArraySelector"}),[l]);c.useEffect(()=>{if(e){const{projectId:v,dataset:p}=o;e.send("loaders","loader/perspective",{projectId:v,dataset:p,perspective:n})}},[e,o,n]);const h=c.useMemo(()=>{const v=s.map(({_id:w})=>w),p=[...new Set(v)],m=a.capacity;return p.length>=m&&(p.length=m),p},[a.capacity,s]),[d,y]=c.useState(0);return O.jsxs(O.Fragment,{children:[O.jsx(Nt,{cache:a,client:u,turboIds:h,setDocumentsCacheLastUpdated:y}),Object.entries(i).map(([v,{query:p,params:m,perspective:w}])=>O.jsx($t,{cache:a,projectId:o.projectId,dataset:o.dataset,perspective:w,query:p,params:m,channel:e,client:u,refreshInterval:n?2e3:0,liveDocument:t,documentsCacheLastUpdated:d},`${v}${w}`))]})}const Nt=c.memo(function(r){const{cache:t,client:e,turboIds:n,setDocumentsCacheLastUpdated:i}=r,[s,a]=c.useState([]);return c.useEffect(()=>{const l=new Set(s.flat()),o=new Set;for(const h of n)!l.has(h)&&!t.has(h)&&o.add(h);const u=[...o].slice(0,Q);u.length!==0&&a(h=>[...h.slice(-Q),u])},[s,t,n]),c.useEffect(()=>{const l=e.listen("*",{},{events:["mutation"],effectFormat:"mendoza",includePreviousRevision:!1,includeResult:!1,tag:"presentation-loader"}).subscribe(o=>{var u,h;if(o.type==="mutation"&&o.transition==="disappear"&&t.delete(o.documentId)&&i(Date.now()),o.type!=="mutation"||(h=(u=o.effects)==null?void 0:u.apply)==null||!h.length)return;const d=t.peek(o.documentId);if(d){const y={...d};delete y._rev;const v=jt(y,o.effects.apply);t.set(o.documentId,v),i(Date.now())}});return()=>l.unsubscribe()},[t,e,i]),O.jsx(O.Fragment,{children:s.map(l=>O.jsx(st,{cache:t,client:e,ids:l,setDocumentsCacheLastUpdated:i},JSON.stringify(l)))})}),st=c.memo(function(r){const{client:t,cache:e,ids:n,setDocumentsCacheLastUpdated:i}=r;return c.useEffect(()=>{const s=n.filter(a=>!e.has(a));s.length!==0&&t.getDocuments(s).then(a=>{for(const l of a)l&&l!=null&&l._id&&(e.set(l._id,l),i(Date.now()))},console.error)},[e,t,n,i]),null});function $t(r){const{cache:t,projectId:e,dataset:n,perspective:i,query:s,client:a,refreshInterval:l,liveDocument:o,channel:u,documentsCacheLastUpdated:h}=r,d=function(m){const w=c.useMemo(()=>JSON.stringify(m||{}),[m]);return c.useMemo(()=>JSON.parse(w),[w])}(r.params),y=function(m){const{cache:w,liveDocument:L,client:F,refreshInterval:ot,query:N,params:$,perspective:M,documentsCacheLastUpdated:G}=m,[P,at]=c.useState(null),{projectId:ut,dataset:ht}=c.useMemo(()=>{const{projectId:k,dataset:g}=F.config();return{projectId:k,dataset:g}},[F]),[X,lt]=c.useState(null);if(X)throw X;const[Y,q]=function(k){const{refreshInterval:g}=k,R=function(){const[I,_]=c.useState(!1);c.useEffect(()=>{_(navigator.onLine);const J=()=>_(!0),H=()=>_(!1);return window.addEventListener("online",J),window.addEventListener("offline",H),()=>{window.removeEventListener("online",J),window.removeEventListener("offline",H)}},[]);const ct=c.useSyncExternalStore(Kt,()=>document.visibilityState,()=>"hidden");return!I||ct==="hidden"}(),[S,E]=c.useState("hit"),j=c.useCallback(()=>(E("inflight"),()=>E("hit")),[]);return c.useEffect(()=>{if(!g||S!=="hit")return;const I=setTimeout(()=>E("stale"),g);return()=>clearTimeout(I)},[g,S]),c.useEffect(()=>{if(S!=="hit")return;const I=()=>E("stale");return window.addEventListener("focus",I),()=>window.removeEventListener("focus",I)},[g,S]),c.useEffect(()=>{R&&S==="hit"&&E("stale"),!R&&S==="stale"&&E("refresh")},[R,S]),[S,j]}({refreshInterval:ot}),W=Y==="refresh"||Y==="inflight";return c.useEffect(()=>{if(!W)return;let k=!1,g=!1;const R=new AbortController;async function S(){const{signal:j}=R;g=!0;const{result:I,resultSourceMap:_}=await F.fetch(N,$,{tag:"presentation-loader",signal:j,perspective:M,filterResponse:!1});g=!1,j.aborted||(at({result:I,resultSourceMap:_}),k=!0)}const E=q();return S().catch(j=>{g=!1,j.name!=="AbortError"&&lt(j)}).finally(E),()=>{!k&&!g&&R.abort()}},[F,ht,L,$,M,ut,N,W,q]),c.useMemo(()=>G&&P!=null&&P.resultSourceMap?{result:Gt(w,L,P.result,M,P.resultSourceMap),resultSourceMap:P.resultSourceMap}:P,[w,G,L,M,P])}({cache:t,client:a,liveDocument:o,params:d,perspective:i,query:s,refreshInterval:l,documentsCacheLastUpdated:h}),v=y==null?void 0:y.result,p=y==null?void 0:y.resultSourceMap;return c.useEffect(()=>{p&&u.send("loaders","loader/query-change",{projectId:e,dataset:n,perspective:i,query:s,params:d,result:v,resultSourceMap:p})},[u,n,d,i,e,s,v,p]),null}st.displayName="GetDocuments";let et=!1;function Gt(r,t,e,n,i){if(n==="raw")throw new Error("turboChargeResultIfSourceMap does not support raw perspective");return At(e,i,s=>{if(!s._projectId)return t!=null&&t._id&&T(t._id)===T(s._id)?t:r.get(s._id);et||(console.warn("Cross dataset references are not supported yet, ignoring source document",s),et=!0)},(s,{previousValue:a})=>typeof s=="number"&&typeof a=="string"?`${s}`:s,n)}export{Wt as default,Gt as turboChargeResultIfSourceMap};
